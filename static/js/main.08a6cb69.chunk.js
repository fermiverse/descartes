(this.webpackJsonpdescartes=this.webpackJsonpdescartes||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/close.8b20cee7.svg"},,,,,,,,function(e,t,n){e.exports=n.p+"static/media/menu.4aaf92d0.svg"},,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/earth.11093ee1.svg"},function(e,t,n){e.exports=n.p+"static/media/regmap.07ddfa3b.svg"},function(e,t,n){e.exports=n.p+"static/media/point.5f83c812.svg"},function(e,t,n){e.exports=n.p+"static/media/graph.cc27234c.svg"},function(e,t,n){e.exports=n.p+"static/media/area.0574f801.svg"},function(e,t,n){e.exports=n.p+"static/media/layers.2ddc5da1.svg"},function(e,t,n){e.exports=n.p+"static/media/pencil.bdced74c.svg"},function(e,t,n){e.exports=n.p+"static/media/marker1.3f22cecd.svg"},function(e,t,n){e.exports=n.p+"static/media/marker3.ba8612b6.svg"},function(e,t,n){e.exports=n.p+"static/media/marker2.2816d43b.svg"},function(e,t,n){e.exports=n.p+"static/media/marker4.7a9f1bc6.svg"},function(e,t,n){e.exports=n.p+"static/media/indicator1.0b77f2e2.svg"},function(e,t,n){e.exports=n.p+"static/media/indicator2.5deb1712.svg"},function(e,t,n){e.exports=n.p+"static/media/indicator3.f93caf92.svg"},function(e,t,n){e.exports=n.p+"static/media/expand.4ef41a51.svg"},function(e,t,n){e.exports=n.p+"static/media/information.8bbb0af1.svg"},function(e,t,n){e.exports=n.p+"static/media/descartes_big.8c90f56f.svg"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzlFQkFERkU4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzlFQkFERkQ4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJFOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJGOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Kk5lQwAABYxJREFUeNrkm29oVXUYx3+7bM3V1FnbqlltrtXWtYRa1nqxooY5E7EhKWGuaTDBagol9SIMDCKICASj+cISw/DPi16ZBakrUBnoC7nNoTMWy6I1c+LmVq6t78N9jpyu555znt855+536IHPi939/jzP95zznN+/kzc1NaUitirwJJgPasF94DZQDG7hMqNgBFwEZ5kU+AH0R+lcXgQCJMBT4EXwLKgM2N7P4FvwJegCk6YKUA5eB23grogu2C/gc7AN/GGKABTsZtAOZqjc2DjYAT5kUfSNBNCkAGwGo1PTZ6PsQ4FuHLp3QD3YDR5QZtgZsAac1ElYokcGbATHDApesS/kUwf7GEkOKAK7wAvKbNsPXgZjYQowG3wNnlDxsONgCbgchgAU/GHwiIqXUT5o8hLBKwfcDA7FMHgrUR/iGLQEoGTyBWhQ8bUGjiFPR4A3QIuKv7VwLKIcQMnue5Dv0fjT/IwtAM3g+RyMBmkU+BXf3qc5Rx3xqDPBE7LjfkaCheCcj1HYKYe6JeBt8GcEo75L3HaJQ7+nfNQ/x7H9p67TFX4L1Pi4EocdfhsGH4BPwVbwqu0xGwI/8vT2N/77Gv+vAJSCO3n6PJ//Vjz72w62cPtORnfAwx7+1nBsW93ugGow7vOKtPkYa9eDl0Clxji9kuvW+yjb5tPncY7xet3MhjoFt2RzgIlU2DQL/O6017W/Be4BawXJqMCgTH+ToOxajvWG1+AmYVBlBglQKrxwmzIFoB9XCzt91CABpL6sti62JcBiXtKS2GMGCSD1pZxjvi7AKmED9PraYJAAG2yvVL+2yi7AImHl90C3QQJ03/B+97ZF1lCYVlN6BBV/BffykNQkoyF4H5grqJOkO6BR2NF2A4O35gifCOs0JjTW9vYaPPPbJ11LJAFqBRVoDf68wQLQI3BBUL424XPiY1lvDOb/ZwRla0iAOYIKv8dAgEFB2VtJgJmCChMxEEAyHigmAQoFFWbFQIDZgrKF0p2hmTEQQOQjCTAmKD8vBgJUCcqOkQBXBBXosEORwcEXKdmBjCskwICgQr5h0+BMW6i8V7LtNkAC9As7WWqwAM8Jy/cnhBMhspVKvq2eC0uwbxLrSWhMa+dpdJQLW6mRpLtpOlyuMcL7CTwErhoSPG2ApjQEuD3BQ0fp0ZJqlT6pZYpt0wieYh60nuWDGp2+At4xIPgt7IvU0jHzBkFdgD27HWDGNGyGFHHfulaXuTN0IkBjZ8EykJeDwKmPFtAXwN8TTltjrVkKfwcawXJW3G3v8DTYCKoiCLwGvAl6QthpbnU6J5jP2f1uh1Wgxbbxwv0qvT/vtZRGA6wuzs50+Pkb8JdgQtPMq1VJld7bnxtSzhjgJD5hzwEW611OZK6xlSvzeYbAsl3Cx4PK7ozodOl6t93hfJByqbzOVnYh+MdHhxfBLI1bnuoMhRx8imPMKgDR5LG/nrSVfddHpx8HeO4/ClmApsw+snXsdk7gYMat+r5Hp0sDCLAkxOA7nfrI1nGxx2tmQUb5x8FuzgvD4Dw4wNm2MIAA1SEF38cx+RaAeBCMZGlwb44GOyUhBD/CsTj24TatpddXq3L+RIVmXnE4QzjJMaSylvBxFdqzKHsVrDD8Dmj36sOvIx0unewHDRENg4MI0BH2FyP0RcZOlzW3Ib7VLvPqDK0z1PEq7bDmLVwCLgnr0AhvnUp/0eJp0k9m6HO4fUp2nGZODgUY5PzUJVlHkxg1TEfnjxqY8I6yb12SSjqLm7T9/Ax4TaW/+JxuIx862KcL4toBk1QFT1omXZLRHQHaL3Npl/r8jH3QjiGsbJ3kGd/fDo6WBWi31KG9a9xXMgzfw35tVfCR9l52dk8Ibe7htnq57YowfY7i4+lYWUL9z+1fAQYACqstE4NCc18AAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABACAYAAABFqxrgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATwSURBVHgB3ZyNVdswEMcvPAbIBnUngE5QM0HZgHQC2CDuBLQTJJ0AOkHcCUonsJkANvj3DsmPPKOTbX00Mb/3hF1bOkvn00knK11QAACWfCg5FZzOOC3t+XIv27L371hax7kcHzk9SFosFi0FsBib0Tb8mkzjSzpOWk73nH6EKsSJNJ7TmtMT5sWGU0GxsJArzK/xfdZD7Vx4FCCFK3ofiM+44C7y7LrpVAIr4JYPNxTGs005iHG2LadPLkW8UcJICxBBot1fVricP2uazgFMf+9SyemzPfchI8inIcGrgf4l/qGCGSmODq7XJadmoA23PgHFgIDtsTa+j31RPkqt4NpTqKKZAb9V77RCjVLgjmYK1/0GY63Bo7UGKSYcGcDrJK6x6c5VV3nrStu+9zPeKRlDh8nscN3+OOorjvu8l69U2vbUF6jNCgs6QjCxv0O3hlLun9gTl9evkwYhaTn33Csd136RR84p6TOw35QBmGG2oLcNaclMZnJMuB6U62ddpbQx9ZISAePEbjxmuY/09VtfV4Tez4U75fnOZ3UZtkqGktI0fo3wSHQDRRlwv7zGk99Vh6a7qY0MHyhOAZdIF4avlWesbP0leafzcM+DnrqbOyRWAvyzz1B2iJi2wz2kQu6daIXYQT1SAMi3DlFyilGE6nBPKSEYH4bLOuBfeq2YNExGi6FwWPKI47uglECJGWgiGA7DG5gRYjkgp0RMOKzL1X1fCiXAjAKNp9KTw3CEhsO6vG1uJayhU1EgCAmHdVmTldBMfECjPGBDkWBKOOyXoyrhhCJhIStyO7OW0zeKhEcpCXlr5XaSWW20EpgvyvVvCQMwTZlXlIAUSiiV6zUlgpVZK/LEIZ9TJFFKsBX4X2G4FtUeVgmkh+F/KT1aOFxQJCm6g4scawKazOjPALksYVbEKiHb25kgM9rqYpXQKtfPKD2aA3ygSKKUYEcA15uQICi1NWjzkZYiSeEYtTdxQ4mAWTJzWYJ8CT+sJVi05ezrhNaghc73lIAUStiSu0uIAibH/X1YkbJZTIsRflIK4FuAHC/DF/uvKRCYPVMa2UPp1Isq8h1h6qLKNfwUE+XlVYJ9SDlQ6QYm7B4jZzcgq6KJQFlek3sLmK8wbzwve93RGz33HlTxYcj8xX/UZAKi/YVWWeJf0fBEa3jfkbtu0n3K/vWXdmpap0C46Hfko0HgiONr54mnUNDHF1aszA+iV5Qc1KRswYtFlJBcKFe04sNXSjCbs8gq1UWkAgrHtfblL3SvGb1YAbMjbotwdinqYevi+i768lVaLKFVykU/XGILTis+/UjGMuoRxVoy3enCvv3oabH1Iy5f8mJZp5RRCR020NpKshUS2cVexbqtwHWmTRpaW1r5I0rw7+JIjG1kTf8XTQlmGRBmtqftI3gXK0cY2Lg1lKmimQPjnF00/Yzap66nuVsDzJYfF5t+Rl+XiA6HDwX8QVjpKpAlHD4U8Ad06gZvnzXMyiIQE4bD7Djz0WBEOHwokCoMx/AOkU4ZG5hNFOc4gPOEsdzCvrhbDG/xEf64ZGk/BNtS2GfvbubXP4+lP+0taDreX8Q5GWkRc2GHUGuFMfcG86aiWBAfDh+KHUYuxk75wXhBZo3uio77B+PyLeJ+Sgg+eTFVwOt/HSDRmSzDFfZWsZetoLS0e+ed05Vrj/YYvDvmH/UlUvwlo7csAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGeSURBVHgB7ZiNUcJAEIVfGAuADo4KpAStQDqQDrQDsAJLADrACogVYAekA+3gfAvHDBM1s8G4d3Hum1kuOTbJvtzfXoCA935Im9P2/sg7bUubIXUYpDsL/DuekSqK4E88IkUY2NLrkC41RGIMaBOlrwQ/RWK0ESA4JIYI+ECPEQFvLfxLpAYH5o1yEO+RKgxupZiBHFKGAS5+evO0NgPdlOL8JLxlmSpdqNoURVEik/m/FIhIyK1kgrgLpQt/VaGUNeqV43DTdBPtOrBtuIeGRe2aeZieNeyD/5dkcgBj/DF93/FwgWOCqMEF/52vrUemAsLDpSUvXVecXH8uwroFtvh9Rutoy9OJpYB7dJeOy7g97E0sBTh0y4P8mA/iDpFWGKYgoMLlm6ppLAEl7ZY24iI1po14PKY9oR2TK9izZsCzeiXrKhaS0ku5hA5n3QIVrfH7EoWsoN+6XlsLeGGAmv6+hhJrARulX6n0M+9C2i8g6lnJVICy+6j9BEsBFf6APq/EB7KA2GQBsckCYpMFxCYLiE0WEJssIDa9F/AJdhLQG0LsNw8AAAAASUVORK5CYII="},function(e,t,n){e.exports=n.p+"static/media/plogo.ad839e81.svg"},function(e,t,n){e.exports=n(88)},,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(41),l=n.n(r),o=(n(69),n(15)),c=n(6),s=n(7),u=n(5),d=n(10),p=n(19),m=n(43),f=n.n(m),g=n(44),b=n.n(g),E=n(45),h=n.n(E),v=n(46),y=n.n(v),O=n(47),j=n.n(O),A=n(48),x=n.n(A),w=n(49),k=n.n(w),S=n(11),C=n(12),N=n(14),G=n(13),P=n(8),I=n.n(P),L=n(50),B=n.n(L),M=n(51),D=n.n(M),T=function(e){Object(N.a)(n,e);var t=Object(G.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"render",value:function(){var e=this,t=this.props.points,n=this.props.activeGid?this.props.points.filter((function(t){return t.gid===e.props.activeGid})):this.props.points,a=this.props.setPoints,r=this.props.setSelectedPoint,l=this.props.setSelectedLine,o=this.props.setSelectedArea,c="temp"===this.props.type;return n.map((function(e){return i.a.createElement(d.c,{key:I()(),latitude:e.coordinates[1],longitude:e.coordinates[0],draggable:!0,onDragStart:function(e){r(null)},onDragEnd:function(n){var i=t.slice(),r=t.indexOf(e),l=Object(s.a)(Object(s.a)({},e),{},{coordinates:n.lngLat});i.splice(r,1,l),a(i)},offsetLeft:c?-12:-16,offsetTop:c?-12:-38.71},i.a.createElement("div",{style:{cursor:"pointer"},title:"P".concat(n.indexOf(e)+1),onClick:function(t){c||(r(e),l(null),o(null))}},i.a.createElement("img",{src:c?D.a:B.a,alt:"marker",width:c?"24px":"32px",className:"marker"})))}))}}]),n}(a.PureComponent),J=n(52),R=n.n(J),F=function(e){Object(N.a)(n,e);var t=Object(G.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"render",value:function(){var e=this,t=this.props.lines,n=this.props.activeGid?this.props.lines.filter((function(t){return t.gid===e.props.activeGid})):this.props.lines,a=this.props.setLines,r=this.props.setSelectedPoint,l=this.props.setSelectedLine,o=this.props.setSelectedArea;return n.map((function(e){return e.points.map((function(c){return i.a.createElement(d.c,{key:I()(),latitude:c.coordinates[1],longitude:c.coordinates[0],draggable:!0,onDragEnd:function(n){var i=e.points.slice(),r=e.points.indexOf(c),l=Object(s.a)(Object(s.a)({},c),{},{coordinates:n.lngLat});i.splice(r,1,l);var o=t.slice(),u=t.indexOf(e),d=Object(s.a)(Object(s.a)({},e),{},{points:i});o.splice(u,1,d),a(o)},offsetLeft:-12,offsetTop:-12},i.a.createElement("div",{style:{cursor:"pointer"},title:"L".concat(n.indexOf(e)+1),onClick:function(t){r(c),l(e),o(null)}},i.a.createElement("img",{src:R.a,alt:"marker",width:"24px",className:"marker"})))}))}))}}]),n}(a.PureComponent),Y=n(53),W=n.n(Y),Q=function(e){Object(N.a)(n,e);var t=Object(G.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"render",value:function(){var e=this,t=this.props.areas,n=this.props.activeGid?this.props.areas.filter((function(t){return t.gid===e.props.activeGid})):this.props.areas,a=this.props.setAreas,r=this.props.setSelectedPoint,l=this.props.setSelectedArea,o=this.props.setSelectedLine;return n.map((function(e){return e.points.map((function(c){return i.a.createElement(d.c,{key:I()(),latitude:c.coordinates[1],longitude:c.coordinates[0],draggable:!0,onDragEnd:function(n){var i=e.points.slice(),r=e.points.indexOf(c),l=Object(s.a)(Object(s.a)({},c),{},{coordinates:n.lngLat});i.splice(r,1,l);var o=t.slice(),u=t.indexOf(e),d=Object(s.a)(Object(s.a)({},e),{},{points:i});o.splice(u,1,d),a(o)},offsetLeft:-12,offsetTop:-12},i.a.createElement("div",{style:{cursor:"pointer"},title:"A".concat(n.indexOf(e)+1),onClick:function(t){r(c),l(e),o(null)}},i.a.createElement("img",{src:W.a,alt:"marker",width:"24px",className:"marker"})))}))}))}}]),n}(a.PureComponent),U=function(e){Object(N.a)(n,e);var t=Object(G.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"render",value:function(){var e={type:"FeatureCollection",features:this.props.lines.map((function(e){return{type:"Feature",geometry:{type:"LineString",coordinates:e.points.map((function(e){return e.coordinates}))}}}))};return i.a.createElement(d.f,{id:"line",type:"geojson",data:e},i.a.createElement(d.b,{id:"line-layer",type:"line",paint:{"line-color":"rgb(200,200,200)","line-width":3},layout:{"line-cap":"round","line-join":"round"}}))}}]),n}(a.PureComponent),V=function(e){Object(N.a)(n,e);var t=Object(G.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"render",value:function(){var e={type:"FeatureCollection",features:this.props.areas.map((function(e){return{type:"Feature",geometry:{type:"Polygon",coordinates:[e.points.map((function(e){return e.coordinates}))]}}}))};return i.a.createElement(d.f,{id:"area",type:"geojson",data:e},i.a.createElement(d.b,{id:"polygon-layer",type:"fill",paint:{"fill-color":"rgb(220,220,220)","fill-opacity":.45}}))}}]),n}(a.PureComponent),K=function(e){Object(N.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(S.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).haverSine=function(e,t){var n=e[1]*Math.PI/180,a=t[1]*Math.PI/180,i=(t[1]-e[1])*Math.PI/180,r=(t[0]-e[0])*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(n)*Math.cos(a)*Math.sin(r/2)*Math.sin(r/2);return 6371e3*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},e}return Object(C.a)(n,[{key:"render",value:function(){for(var e=this.props.destinations,t=[],n=[],a=0;a<e.length-1;a++)t.push([.5*(e[a][0]+e[a+1][0]),.5*(e[a][1]+e[a+1][1])]),n.push(this.haverSine(e[a],e[a+1]).toFixed(3));return t.map((function(e){return i.a.createElement(d.c,{key:I()(),latitude:e[1],longitude:e[0]},i.a.createElement("div",{style:{color:"rgb(180, 180, 180)",fontSize:"10.5px",backgroundColor:"rgba(0, 0, 0, 0.4)",padding:"5px",borderRadius:"5px"}},"".concat(n[t.indexOf(e)],"m")))}))}}]),n}(a.PureComponent),H=function(e){Object(N.a)(n,e);var t=Object(G.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"render",value:function(){var e=this,t=this.props.activeGid?this.props.entities.filter((function(t){return t.gid===e.props.activeGid})):this.props.entities;return"areas"===this.props.type?t.map((function(e){return i.a.createElement(K,{key:I()(),destinations:e.points.map((function(e){return e.coordinates})).concat([e.points[0].coordinates])})})):t.map((function(e){return i.a.createElement(K,{key:I()(),destinations:e.points.map((function(e){return e.coordinates}))})}))}}]),n}(a.PureComponent),z=function(e){Object(N.a)(n,e);var t=Object(G.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"render",value:function(){var e=this,t={type:"FeatureCollection",features:(this.props.activeGid?this.props.points.filter((function(t){return t.gid!==e.props.activeGid})):[]).map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e.coordinates}}}))};return i.a.createElement(d.f,{id:"point",type:"geojson",data:t},i.a.createElement(d.b,{id:"point-layer",type:"circle",paint:{"circle-color":"rgb(255, 0, 0)","circle-radius":5,"circle-stroke-color":"rgb(200, 200, 200)","circle-stroke-width":2}}))}}]),n}(a.PureComponent);function Z(e){if(e){var t=Object.keys(e),n=[];return t.length&&t.forEach((function(t){n.push({key:t,value:e[t]})})),n}return[]}var X=function(e){Object(N.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(S.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={metaProps:e.props.selectedPoint.properties?Z(e.props.selectedPoint.properties):[]},e}return Object(C.a)(n,[{key:"componentDidUpdate",value:function(e){e.selectedPoint!==this.props.selectedPoint&&this.setState({metaProps:this.props.selectedPoint.properties?Z(this.props.selectedPoint.properties):[]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.selectedPoint,a=t.setSelectedPoint,r=t.points,l=t.setPoints,c=n.coordinates,p=n.gid,m=r.indexOf(n);return i.a.createElement(d.e,{latitude:c[1],longitude:c[0],offsetTop:-38.71,closeOnClick:!1,sortByDepth:!0,captureScroll:!0,onClose:function(e){a(null)}},i.a.createElement("table",{className:"edit"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Key"),i.a.createElement("td",null,"Value"))),i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Group"),i.a.createElement("td",null,p)),i.a.createElement("tr",null,i.a.createElement("td",null,"Entity"),i.a.createElement("td",null,"Point")),i.a.createElement("tr",null,i.a.createElement("td",null,"Latitude"),i.a.createElement("td",{style:{color:"blue"}},c[1])),i.a.createElement("tr",null,i.a.createElement("td",null,"Longitude"),i.a.createElement("td",{style:{color:"blue"}},c[0])),this.state.metaProps.map((function(t){return i.a.createElement("tr",{key:I()()},i.a.createElement("td",{id:"meta_".concat(e.state.metaProps.indexOf(t)),contentEditable:"true",suppressContentEditableWarning:"true",onBlur:function(n){t.key=document.getElementById("meta_".concat(e.state.metaProps.indexOf(t))).innerText}},t.key),i.a.createElement("td",{id:"val_".concat(e.state.metaProps.indexOf(t)),contentEditable:"true",suppressContentEditableWarning:"true",onBlur:function(n){t.value=document.getElementById("val_".concat(e.state.metaProps.indexOf(t))).innerText}},t.value))})))),i.a.createElement("div",{id:"button-set",style:{display:"flex",alignItems:"baseline",justifyContent:"space-between"}},i.a.createElement("button",{className:"rounded",id:"fAdd",title:"Add a field",onClick:function(){e.setState({metaProps:[].concat(Object(u.a)(e.state.metaProps),[{key:"",value:""}])})}},"Add"),i.a.createElement("button",{className:"rounded",id:"fReset",title:"Clear meta properties",onClick:function(){e.setState({metaProps:[]})}},"Clear"),i.a.createElement("button",{className:"rounded",title:"Confirm",onClick:function(){var t,i=Object(u.a)(r),c={},d=Object(o.a)(e.state.metaProps);try{for(d.s();!(t=d.n()).done;){var p=t.value;p.key&&(c[p.key]=p.value)}}catch(f){d.e(f)}finally{d.f()}i.splice(m,1,Object(s.a)(Object(s.a)({},n),{},{properties:c})),l(i),a(null)}},"Apply")))}}]),n}(a.PureComponent);function q(e){if(e){var t=Object.keys(e),n=[];return t.length&&t.forEach((function(t){n.push({key:t,value:e[t]})})),n}return[]}var _=function(e){Object(N.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(S.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={metaProps:e.props.selectedLine.properties?q(e.props.selectedLine.properties):[]},e}return Object(C.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.selectedPoint,a=t.setSelectedPoint,r=t.selectedLine,l=t.setSelectedLine,c=t.lines,p=t.setLines,m=n.coordinates,f=n.gid,g=c.indexOf(r);return i.a.createElement(d.e,{latitude:m[1],longitude:m[0],offsetTop:-12,closeOnClick:!1,sortByDepth:!0,captureScroll:!0,onClose:function(e){a(null),l(null)}},i.a.createElement("table",{className:"edit"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Key"),i.a.createElement("td",null,"Value"))),i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Group"),i.a.createElement("td",null,f)),i.a.createElement("tr",null,i.a.createElement("td",null,"Entity"),i.a.createElement("td",null,"LineString")),i.a.createElement("tr",null,i.a.createElement("td",null,"Vertex"),i.a.createElement("td",null,"Vertex ".concat(r.points.indexOf(n)+1))),i.a.createElement("tr",null,i.a.createElement("td",null,"Latitude"),i.a.createElement("td",{style:{color:"blue"}},m[1])),i.a.createElement("tr",null,i.a.createElement("td",null,"Longitude"),i.a.createElement("td",{style:{color:"blue"}},m[0])),this.state.metaProps.map((function(t){return i.a.createElement("tr",{key:I()()},i.a.createElement("td",{id:"meta_".concat(e.state.metaProps.indexOf(t)),contentEditable:"true",suppressContentEditableWarning:"true",onBlur:function(n){t.key=document.getElementById("meta_".concat(e.state.metaProps.indexOf(t))).innerText}},t.key),i.a.createElement("td",{id:"val_".concat(e.state.metaProps.indexOf(t)),contentEditable:"true",suppressContentEditableWarning:"true",onBlur:function(n){t.value=document.getElementById("val_".concat(e.state.metaProps.indexOf(t))).innerText}},t.value))})))),i.a.createElement("div",{id:"button-set",style:{display:"flex",alignItems:"baseline",justifyContent:"space-between"}},i.a.createElement("button",{className:"rounded",id:"fAdd",title:"Add a field",onClick:function(){e.setState({metaProps:[].concat(Object(u.a)(e.state.metaProps),[{key:"",value:""}])})}},"Add"),i.a.createElement("button",{className:"rounded",id:"fReset",title:"Clear meta properties",onClick:function(){e.setState({metaProps:[]});var t=Object(u.a)(c);t.splice(g,1,Object(s.a)(Object(s.a)({},r),{},{properties:{}})),p(t)}},"Clear"),i.a.createElement("button",{className:"rounded",title:"Confirm",onClick:function(){var t,n=Object(u.a)(c),i={},d=Object(o.a)(e.state.metaProps);try{for(d.s();!(t=d.n()).done;){var m=t.value;m.key&&(i[m.key]=m.value)}}catch(f){d.e(f)}finally{d.f()}n.splice(g,1,Object(s.a)(Object(s.a)({},r),{},{properties:i})),p(n),a(null),l(null)}},"Apply")))}}]),n}(a.PureComponent);function $(e){if(e){var t=Object.keys(e),n=[];return t.length&&t.forEach((function(t){n.push({key:t,value:e[t]})})),n}return[]}var ee=function(e){Object(N.a)(n,e);var t=Object(G.a)(n);function n(){var e;Object(S.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={metaProps:e.props.selectedArea.properties?$(e.props.selectedArea.properties):[]},e}return Object(C.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.selectedPoint,a=t.setSelectedPoint,r=t.selectedArea,l=t.setSelectedArea,c=t.areas,p=t.setAreas,m=n.coordinates,f=n.gid,g=c.indexOf(r);return i.a.createElement(d.e,{latitude:m[1],longitude:m[0],offsetTop:-12,closeOnClick:!1,sortByDepth:!0,captureScroll:!0,onClose:function(e){a(null),l(null)}},i.a.createElement("table",{className:"edit"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Key"),i.a.createElement("td",null,"Value"))),i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Group"),i.a.createElement("td",null,f)),i.a.createElement("tr",null,i.a.createElement("td",null,"Entity"),i.a.createElement("td",null,"Polygon")),i.a.createElement("tr",null,i.a.createElement("td",null,"Vertex"),i.a.createElement("td",null,"Vertex ".concat(r.points.indexOf(n)+1))),i.a.createElement("tr",null,i.a.createElement("td",null,"Latitude"),i.a.createElement("td",{style:{color:"blue"}},m[1])),i.a.createElement("tr",null,i.a.createElement("td",null,"Longitude"),i.a.createElement("td",{style:{color:"blue"}},m[0])),this.state.metaProps.map((function(t){return i.a.createElement("tr",{key:I()()},i.a.createElement("td",{id:"meta_".concat(e.state.metaProps.indexOf(t)),contentEditable:"true",suppressContentEditableWarning:"true",onBlur:function(n){t.key=document.getElementById("meta_".concat(e.state.metaProps.indexOf(t))).innerText}},t.key),i.a.createElement("td",{id:"val_".concat(e.state.metaProps.indexOf(t)),contentEditable:"true",suppressContentEditableWarning:"true",onBlur:function(n){t.value=document.getElementById("val_".concat(e.state.metaProps.indexOf(t))).innerText}},t.value))})))),i.a.createElement("div",{id:"button-set",style:{display:"flex",alignItems:"baseline",justifyContent:"space-between"}},i.a.createElement("button",{className:"rounded",id:"fAdd",title:"Add a field",onClick:function(){e.setState({metaProps:[].concat(Object(u.a)(e.state.metaProps),[{key:"",value:""}])})}},"Add"),i.a.createElement("button",{className:"rounded",id:"fReset",title:"Clear meta properties",onClick:function(){e.setState({metaProps:[]});var t=Object(u.a)(c);t.splice(g,1,Object(s.a)(Object(s.a)({},r),{},{properties:{}})),p(t)}},"Clear"),i.a.createElement("button",{className:"rounded",title:"Confirm",onClick:function(){var t,n=Object(u.a)(c),i={},d=Object(o.a)(e.state.metaProps);try{for(d.s();!(t=d.n()).done;){var m=t.value;m.key&&(i[m.key]=m.value)}}catch(f){d.e(f)}finally{d.f()}n.splice(g,1,Object(s.a)(Object(s.a)({},r),{},{properties:i})),p(n),a(null),l(null)}},"Apply")))}}]),n}(a.PureComponent),te=[],ne=0,ae=function(e,t,n,a){var i=t.filter((function(t){return t.gid===e})),r=n.filter((function(t){return t.gid===e})),l=a.filter((function(t){return t.gid===e}));if(i.length+r.length+l.length===0)return[null,null];r=r.map((function(e){return e.points})).flat(),l=l.map((function(e){return e.points})).flat();var o=[].concat(Object(u.a)(i),Object(u.a)(r),Object(u.a)(l)).map((function(e){return e.coordinates})),c=o.map((function(e){return e[1]})),s=o.map((function(e){return e[0]}));return[[Math.min.apply(Math,Object(u.a)(s)),Math.min.apply(Math,Object(u.a)(c))],[Math.max.apply(Math,Object(u.a)(s)),Math.max.apply(Math,Object(u.a)(c))]]},ie=function(e){var t=e.points,n=e.setPoints,r=e.lines,l=e.setLines,o=e.areas,m=e.setAreas,g=e.showSidebar,E=e.tempMarks,v=e.setTempMarks,O=e.activeGid,A=e.setActiveGid,w=e.gids,S=e.setGids,C=e.displayGid,N=(e.setDisplayGid,t.length?t[t.length-1].coordinates:[77.516233,28.494164]),G={position:"absolute",right:"0",top:"0",height:"100%",width:g?"calc(100vw - 384px)":"100vw"},P=Object(a.useState)({latitude:N[1],longitude:N[0],width:"fit",height:window.innerHeight,zoom:14}),I=Object(c.a)(P,2),L=I[0],B=I[1],M=Object(a.useState)(!1),D=Object(c.a)(M,2),J=D[0],R=D[1],Y=Object(a.useState)(!0),W=Object(c.a)(Y,2),K=W[0],Z=W[1],q=Object(a.useState)(!0),$=Object(c.a)(q,2),ie=$[0],re=$[1],le=Object(a.useState)({draw:!1,init:!0}),oe=Object(c.a)(le,2),ce=oe[0],se=oe[1],ue=Object(a.useState)(null),de=Object(c.a)(ue,2),pe=de[0],me=de[1],fe=Object(a.useState)([]),ge=Object(c.a)(fe,2),be=ge[0],Ee=ge[1],he=Object(a.useState)([]),ve=Object(c.a)(he,2),ye=ve[0],Oe=ve[1],je=Object(a.useState)(null),Ae=Object(c.a)(je,2),xe=Ae[0],we=Ae[1],ke=Object(a.useState)(null),Se=Object(c.a)(ke,2),Ce=Se[0],Ne=Se[1],Ge=Object(a.useState)(null),Pe=Object(c.a)(Ge,2),Ie=Pe[0],Le=Pe[1],Be=function(e){"Escape"===e.key&&(ye.length&&(0===ne?l([].concat(Object(u.a)(r),[{gid:O,points:ye}])):1===ne?ye.length>2?m([].concat(Object(u.a)(o),[{gid:O,points:ye}])):alert("Specify more than 2 nodes for polygon"):n([].concat(Object(u.a)(t),Object(u.a)(ye)))),se({draw:!1,init:!0}),te=[],me(null),Oe([]))};return Object(a.useEffect)((function(){return window.addEventListener("keydown",Be),function(){window.removeEventListener("keydown",Be)}})),Object(a.useEffect)((function(){var e=r.length;e&&0===r[e-1].points.length&&(te=[],me(null))}),[r]),Object(a.useEffect)((function(){we(null)}),[O,w]),Object(a.useEffect)((function(){var e=ae(C,t,r,o),n=Object(c.a)(e,2),a=n[0],i=n[1];if(null!==a&&null!==i){var l=new p.b({width:g?window.innerWidth-384:window.innerWidth,height:window.innerHeight}).fitBounds([a,i],{padding:40}),s=l.latitude,u=l.longitude,d=l.zoom;d=Math.min(d,13),B({width:"fit",height:window.innerHeight,latitude:s,longitude:u,zoom:d})}}),[C]),i.a.createElement("div",{id:"map",style:G},i.a.createElement(d.g,Object.assign({},L,{mapboxApiAccessToken:"pk.eyJ1IjoiZmVybWl2ZXJzZSIsImEiOiJja2Q2YzU0ejcwNWUyMnl2cTB6Z21vYXZsIn0.hlNWecQooJMCAwLdqiM-cQ",mapStyle:J?"mapbox://styles/mapbox/satellite-v9":"mapbox://styles/fermiverse/ckd7yqq7u084t1iqj97nvbjc6",onViewportChange:function(e){B(Object(s.a)(Object(s.a)({},e),{},{width:"fit",height:"fit"}))},onClick:ce.draw?function(e){if(ce.init)se({draw:!0,init:!1});else{var t=e.lngLat;te=t,Oe([].concat(Object(u.a)(ye),[{gid:O,coordinates:t}]))}}:null,onHover:ce.draw?function(e){Ee(e.lngLat),te&&te[0]&&me(function(e,t){var n=e[1]*Math.PI/180,a=t[1]*Math.PI/180,i=(t[1]-e[1])*Math.PI/180,r=(t[0]-e[0])*Math.PI/180,l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(n)*Math.cos(a)*Math.sin(r/2)*Math.sin(r/2);return 6371e3*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}(te,e.lngLat))}:null,minZoom:2,touchRotate:!0}),i.a.createElement("div",{style:{position:"absolute",right:"15px",top:"30px"}},i.a.createElement(d.d,null)),i.a.createElement("div",{style:{position:"absolute",top:"135px",right:"15px",zIndex:100}},i.a.createElement(d.a,{onViewportChange:function(e){var n=ae(O,t,r,o),a=Object(c.a)(n,2),i=a[0],l=a[1];if(null!==i&&null!==l){var u=new p.b({width:g?window.innerWidth-384:window.innerWidth,height:window.innerHeight}).fitBounds([i,l],{padding:40}),d=u.latitude,m=u.longitude,f=u.zoom;f=Math.min(f,13),B(Object(s.a)(Object(s.a)({},L),{},{latitude:d,longitude:m,zoom:f}))}}})),!xe||Ce||Ie?null:i.a.createElement(X,{selectedPoint:xe,setSelectedPoint:we,points:t,setPoints:n}),xe&&Ce&&!Ie?i.a.createElement(_,{selectedPoint:xe,setSelectedPoint:we,selectedLine:Ce,setSelectedLine:Ne,lines:r,setLines:l}):null,xe&&Ie&&!Ce?i.a.createElement(ee,{selectedPoint:xe,setSelectedPoint:we,selectedArea:Ie,setSelectedArea:Le,areas:o,setAreas:m}):null,i.a.createElement(T,{points:t,setPoints:n,type:"",activeGid:O,setSelectedPoint:we,setSelectedArea:Le,setSelectedLine:Ne}),ye.length?i.a.createElement(T,{points:ye,setPoints:Oe,type:"temp"}):null,E.length?i.a.createElement(T,{points:E,setPoints:v,type:"temp"}):null,i.a.createElement(F,{lines:r,setLines:l,activeGid:O,setSelectedPoint:we,setSelectedLine:Ne,setSelectedArea:Le}),i.a.createElement(Q,{areas:o,setAreas:m,activeGid:O,setSelectedPoint:we,setSelectedArea:Le,setSelectedLine:Ne}),i.a.createElement("button",{className:"custom",id:"point",title:"Add a point",onClick:function(){ce.draw?(te=[],ne=0,me(null),n([].concat(Object(u.a)(t),Object(u.a)(ye))),Oe([])):ne=2,se({draw:!ce.draw,init:!0})}},i.a.createElement("img",{src:h.a,alt:"pt",width:"6px"})),i.a.createElement("button",{className:"custom",id:"line",title:"Add a line",onClick:function(){ce.draw&&(te=[],me(null),l([].concat(Object(u.a)(r),[{gid:O,points:ye}])),Oe([])),ne=0,se({draw:!ce.draw,init:!0})}},i.a.createElement("img",{src:y.a,alt:"line",width:"17px"})),i.a.createElement("button",{className:"custom",id:"area",title:"Add a polygon",onClick:function(){ce.draw?(te=[],ne=0,me(null),ye.length>=3&&m([].concat(Object(u.a)(o),[{gid:O,points:ye}])),Oe([])):ne=1,se({draw:!ce.draw,init:!0})}},i.a.createElement("img",{src:j.a,alt:"ar",width:"17px"})),ce.draw?i.a.createElement("div",{className:"top-drawer",id:g?"no-drop":"drop"},i.a.createElement("p",null,"Draw Mode: ".concat(0===ne?"Line":1===ne?"Polygon":"Point",", press Esc to exit")),be[0]?i.a.createElement("p",null,"Latitude: ".concat(be[1].toFixed(6),", Longitude: ").concat(be[0].toFixed(6))):null,pe?i.a.createElement("p",null,"Displacement: ".concat(pe.toFixed(3),"m")):null):null,K?i.a.createElement(z,{points:t,activeGid:O}):null,K?i.a.createElement(U,{lines:r}):null,K?i.a.createElement(V,{areas:o}):null,ie?i.a.createElement(H,{entities:r,type:"lines",activeGid:O}):null,ie?i.a.createElement(H,{entities:o,type:"areas",activeGid:O}):null,i.a.createElement("button",{className:"blank",id:"measure",title:ie?"Hide measures":"Show measures",onClick:function(){r.length||o.length?re(!ie):re(!1)}},i.a.createElement("img",{src:k.a,alt:"Ms",width:"20px"})),i.a.createElement("button",{className:"blank",id:"GJ",title:K?"Hide Layers":"Show Layers",onClick:function(){r.length||o.length?Z(!K):Z(!1)}},i.a.createElement("img",{src:x.a,alt:"Layer",width:"24px"})),J?i.a.createElement("button",{className:"blank",id:"toggle",title:"Regular View",onClick:function(){R(!J)}},i.a.createElement("img",{src:b.a,alt:"mapicon",width:"24px"})):i.a.createElement("button",{className:"blank",id:"toggle",title:"Satellite View",onClick:function(){R(!J)}},i.a.createElement("img",{src:f.a,alt:"sat",width:"24px"})),i.a.createElement("button",{className:"rounded",id:"reset",title:"Reset Markers",onClick:function(){window.confirm("Clear all geoJSON entities and reset map?")&&(se({draw:!1,init:!0}),n([]),l([]),m([]),A("Group 1"),S(["Group 1"]),te=[],me(null),we(null))}},"Reset")))},re=n(24),le=n.n(re),oe=n(54),ce=n.n(oe),se=n(55),ue=n.n(se),de=n(56),pe=n.n(de),me=n(29),fe=n.n(me),ge=function(e){var t=e.points,n=e.setPoints,r=e.lines,l=e.setLines,d=e.areas,p=e.setAreas,m=e.toggleShowInline,f=e.activeGid,g=e.gids,b=e.setGids,E=e.masterProps,h=e.setMasterProps,v=function(e){var t=Object(u.a)(e);return t.pop(),t},y=function(e,a){var i="Group "+(g.length+1);i=function e(t){return g.includes(t)?e("Group "+(+t.replace("Group ","")+1)):t}(i);try{var c=e.features,m=e.properties||{},y=c.filter((function(e){return"Point"===e.geometry.type})),O=c.filter((function(e){return"LineString"===e.geometry.type})),j=c.filter((function(e){return"Polygon"===e.geometry.type}));(function(e,t,n){var a=0;a+=e.length;var i,r=Object(o.a)(t);try{for(r.s();!(i=r.n()).done;){a+=i.value.geometry.coordinates.length}}catch(s){r.e(s)}finally{r.f()}var l,c=Object(o.a)(n);try{for(c.s();!(l=c.n()).done;){a+=l.value.geometry.coordinates.length}}catch(s){c.e(s)}finally{c.f()}return a})(y,O,j=j.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{geometry:{type:"Polygon",coordinates:e.geometry.coordinates[0]}})})))>1e3&&(alert("Warning: Heavy dataset loaded. This will be rendered as static geoJSON in a separate group."),a=1);var A=y.map((function(e){return{properties:e.properties?e.properties:{},gid:a?i:f,coordinates:e.geometry.coordinates}})),w=O.map((function(e){return{properties:e.properties?e.properties:{},gid:a?i:f,points:e.geometry.coordinates.map((function(e){return{gid:a?i:f,coordinates:e}}))}})),k=j.map((function(e){return{properties:e.properties?e.properties:{},gid:a?i:f,points:v(e.geometry.coordinates.map((function(e){return{gid:a?i:f,coordinates:e}})))}}));a&&b([].concat(Object(u.a)(g),[i]));var S=Object(s.a)({},E);S[a?i:f]=m,h(S),n([].concat(Object(u.a)(t),Object(u.a)(A))),l([].concat(Object(u.a)(r),Object(u.a)(w))),p([].concat(Object(u.a)(d),Object(u.a)(k))),x(!0)}catch(C){console.log("Invalid geoJSON object(s) entered")}},O=Object(a.useState)(!1),j=Object(c.a)(O,2),A=j[0],x=j[1];return Object(a.useEffect)((function(){A&&(setTimeout((function(){x(!1)}),3e3),setTimeout((function(){m(!1)}),5e3))}),[A,m]),i.a.createElement("div",{className:"form-container"},i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("p",null,"Enter geoJSON from a remote source"),i.a.createElement("p",{style:{color:"red",marginLeft:"10px"}},"BETA")),A?i.a.createElement("p",{style:{color:"rgb(30, 165, 17)"}},"geoJSON accepted"):null,i.a.createElement("div",{contentEditable:"true",className:"editable",id:"in-geojson",onFocus:function(){navigator.clipboard.readText().then((function(e){document.getElementById("in-geojson").innerText=e}))}}),i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("button",{className:"rounded",title:"Insert to new group",onClick:function(){try{fe.a.get(document.getElementById("in-geojson").innerText).then((function(e){var t=e.data;y(t,1)}))}catch(e){console.log("GET failed with error",e)}}},"Insert"),i.a.createElement("button",{className:"rounded",id:"append",style:{marginLeft:"10px"},title:"Append to active group",onClick:function(){try{fe.a.get(document.getElementById("in-geojson").innerText).then((function(e){var t=e.data;y(t,0)}))}catch(e){console.log("GET failed with error",e)}}},"Append"),i.a.createElement("button",{className:"rounded",id:"dReset",title:"Clear input",style:{marginLeft:"10px"},onClick:function(){document.getElementById("in-geojson").innerText=""}},"Clear")))},be=n(16),Ee=n.n(be),he=function(e){Object(N.a)(n,e);var t=Object(G.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"render",value:function(){var e=this.props.points,t=this.props.setPoints;return i.a.createElement("div",{className:"dlist"},e.length?e.map((function(n){return i.a.createElement("div",{key:I()(),style:{color:"blue",display:"flex",alignItems:"baseline"}},i.a.createElement("p",null,"".concat(e.indexOf(n)+1,".  [").concat(n.coordinates[1].toFixed(8),", ").concat(n.coordinates[0].toFixed(8),"]")),i.a.createElement("button",{className:"blank",title:"Clear",onClick:function(){var a=e.indexOf(n),i=e.slice();a>-1&&(i.splice(a,1),t(i))}},i.a.createElement("img",{src:Ee.a,alt:"close",width:"12px"})))})):null)}}]),n}(a.PureComponent),ve=n(57),ye=n.n(ve),Oe=function(e){var t=e.ent,n=e.entities,r=e.setEntities,l=e.type,o=Object(a.useState)(!1),s=Object(c.a)(o,2),u=s[0],d=s[1],p=t.points;return i.a.createElement("div",{key:I()()},i.a.createElement("div",{key:I()(),style:{display:"flex",alignItems:"baseline",marginBottom:"5px",marginTop:"5px"}},i.a.createElement("p",null,"".concat(n.indexOf(t)+1,". ").concat("areas"===l?"Polygon":"LineString"," ").concat(n.indexOf(t)+1)),i.a.createElement("button",{className:"blank",title:"Expand",onClick:function(){d(!u)}},i.a.createElement("img",{src:ye.a,alt:"expand",width:"9px"})),i.a.createElement("button",{className:"blank",title:"Clear",onClick:function(){var e=n.indexOf(t),a=n.slice();e>-1&&(a.splice(e,1),r(a))}},i.a.createElement("img",{src:Ee.a,alt:"close",width:"12px",style:{padding:"0"}}))),u?p.map((function(e){return i.a.createElement("div",{key:I()(),style:{color:"blue",display:"flex",alignItems:"baseline",marginLeft:"15px"}},i.a.createElement("p",null,"".concat(p.indexOf(e)+1,".  [").concat(e.coordinates[1].toFixed(8),", ").concat(e.coordinates[0].toFixed(8),"]")))})):null)},je=function(e){Object(N.a)(n,e);var t=Object(G.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"render",value:function(){var e=this.props.entities,t=this.props.setEntities,n=this.props.type;return i.a.createElement("div",{className:"dlist"},e.map((function(a){return i.a.createElement(Oe,{key:I()(),type:n,entities:e,setEntities:t,ent:a})})))}}]),n}(a.PureComponent),Ae=n(58),xe=n.n(Ae);function we(e){if(e){var t=Object.keys(e),n=[];return t.length&&t.forEach((function(t){n.push({key:t,value:e[t]})})),n}return[]}var ke=function(e){var t=e.points,n=e.lines,r=e.areas,l=e.displayGid,d=e.masterProps,p=e.setMasterProps,m=Object(a.useState)(d[l]?we(d[l]):[]),f=Object(c.a)(m,2),g=f[0],b=f[1],E=Object(a.useState)(!0),h=Object(c.a)(E,2),v=h[0],y=h[1],O=Object(a.useState)(d[l]&&d[l].Name?d[l].Name:l),j=Object(c.a)(O,2),A=j[0],x=j[1];return Object(a.useEffect)((function(){b(d[l]?we(d[l]):[]),x(d[l]&&d[l].Name?d[l].Name:l)}),[d,l]),i.a.createElement("div",null,i.a.createElement("div",{className:"options",style:{marginBottom:0,height:"35px"}},i.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"baseline"}},i.a.createElement("p",{style:{padding:"none"}},"Description"),i.a.createElement("div",{style:{display:"flex",float:"right"}},i.a.createElement("button",{className:"group-button",style:{marginRight:"5px"},onClick:function(){y(!v)}},v?"Collapse":"Expand"),i.a.createElement("button",{className:"group-button",style:{marginRight:"5px",backgroundColor:"rgb(0, 81, 255)"},title:"Add a field",onClick:function(){v||y(!0),b([].concat(Object(u.a)(g),[{key:"",value:""}]))}},"Add"),i.a.createElement("button",{className:"group-button",style:{marginRight:"5px",backgroundColor:"rgb(4, 112, 9)"},title:"Confirm properties",onClick:function(){var e,t={},n=Object(o.a)(g);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.key&&(t[a.key]=a.value)}}catch(r){n.e(r)}finally{n.f()}var i=Object(s.a)({},d);i[l]=t,A!==l&&(i[l].Name=A),p(i)}},"Set"),i.a.createElement("button",{className:"group-button",style:{backgroundColor:"rgb(231, 7, 7)"},title:"Clear group properties",onClick:function(){var e=Object(s.a)({},d);e[l]={},p(e),x(l)}},"Clear")))),v?i.a.createElement("div",{className:"options",style:{marginTop:"-5px"}},i.a.createElement("table",{className:"gedit"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Name"),i.a.createElement("td",{id:"gname",style:{color:"rgb(9, 18, 99)"},contentEditable:"true",suppressContentEditableWarning:"true",onBlur:function(e){x(document.getElementById("gname").innerText)}},A))),i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Points"),i.a.createElement("td",null,t.filter((function(e){return e.gid===l})).length)),i.a.createElement("tr",null,i.a.createElement("td",null,"Lines"),i.a.createElement("td",null,n.filter((function(e){return e.gid===l})).length)),i.a.createElement("tr",null,i.a.createElement("td",null,"Areas"),i.a.createElement("td",null,r.filter((function(e){return e.gid===l})).length)),d[l]&&g.map((function(e){return"Name"!==e.key?i.a.createElement("tr",{key:I()()},i.a.createElement("td",{id:"meta_".concat(g.indexOf(e)),contentEditable:"true",suppressContentEditableWarning:"true",onBlur:function(t){e.key=document.getElementById("meta_".concat(g.indexOf(e))).innerText}},e.key),i.a.createElement("td",{id:"val_".concat(g.indexOf(e)),contentEditable:"true",suppressContentEditableWarning:"true",onBlur:function(t){e.value=document.getElementById("val_".concat(g.indexOf(e))).innerText}},e.value)):null}))))):null)},Se=function(e){var t=e.gids,n=e.setGids,r=(e.activeGid,e.setActiveGid),l=e.displayGid,s=e.setDisplayGid,d=e.points,p=e.lines,m=e.areas,f=e.setPoints,g=e.setLines,b=e.setAreas,E=e.masterProps,h=e.setMasterProps,v=function(e){var t=0,n=d.filter((function(t){return t.gid===e})),a=p.filter((function(t){return t.gid===e})),i=m.filter((function(t){return t.gid===e}));t+=n.length;var r,l=Object(o.a)(a);try{for(l.s();!(r=l.n()).done;){t+=r.value.points.length}}catch(u){l.e(u)}finally{l.f()}var c,s=Object(o.a)(i);try{for(s.s();!(c=s.n()).done;){t+=c.value.points.length}}catch(u){s.e(u)}finally{s.f()}return t},y=function e(n){return t.includes(n)?e("Group "+(+n.replace("Group ","")+1)):n},O=Object(a.useState)(!1),j=Object(c.a)(O,2),A=j[0],x=j[1];return i.a.createElement("div",null,i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},"Groups (".concat(t.length,")"),i.a.createElement("div",{onMouseEnter:function(){x(!0)},onMouseLeave:function(){x(!1)}},i.a.createElement("img",{src:xe.a,alt:"info",width:"12px",style:{marginLeft:"8px"}}))),A?i.a.createElement("div",{style:{color:"rgb(50, 50, 50)",fontSize:"12px"}},i.a.createElement("i",null,"Click on a group to make it active. Only the active group is rendered dynamically to the map.")):null,i.a.createElement("div",{className:"options"},t.map((function(e){return e===l?i.a.createElement("button",{key:I()(),className:"chip",title:"Active group"},e||"All",i.a.createElement("div",{className:"blank-no-padding",title:"Delete",onClick:function(){if(window.confirm("Delete ".concat(e," and all its contents?"))){var a=d.filter((function(t){return t.gid!==e})),i=p.filter((function(t){return t.gid!==e})),r=m.filter((function(t){return t.gid!==e})),l=t.length>1?t.filter((function(t){return t!==e})):["Group 1"];f(a),g(i),b(r),n(l)}}},i.a.createElement("img",{src:Ee.a,alt:"close",width:"12px",style:{marginLeft:"10px"}}))):v(e)<1e3?i.a.createElement("button",{key:I()(),className:"inactive-chip",title:"Inactive group",onClick:function(t){s(e),r(e)}},e||"All",i.a.createElement("div",{className:"blank",title:"Delete",onClick:function(){if(window.confirm("Delete ".concat(e," and all its contents?"))){var a=d.filter((function(t){return t.gid!==e})),i=p.filter((function(t){return t.gid!==e})),r=m.filter((function(t){return t.gid!==e})),l=t.length>1?t.filter((function(t){return t!==e})):["Group 1"];f(a),g(i),b(r),n(l)}}},i.a.createElement("img",{src:Ee.a,alt:"close",width:"12px",style:{marginLeft:"10px"}}))):i.a.createElement("button",{key:I()(),className:"static-chip",title:"Static group",onClick:function(t){s(e)}},e,i.a.createElement("div",{className:"blank",title:"Delete",onClick:function(){if(window.confirm("Delete ".concat(e," and all its contents?"))){var a=d.filter((function(t){return t.gid!==e})),i=p.filter((function(t){return t.gid!==e})),r=m.filter((function(t){return t.gid!==e})),l=t.length>1?t.filter((function(t){return t!==e})):["Group 1"];f(a),g(i),b(r),n(l)}}},i.a.createElement("img",{src:Ee.a,alt:"close",width:"12px",style:{marginLeft:"10px"}})))}))),i.a.createElement(ke,{points:d,lines:p,areas:m,displayGid:l,masterProps:E,setMasterProps:h}),i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("button",{className:"rounded",title:"Add a new group",onClick:function(){var e="Group "+(t.length+1);n([].concat(Object(u.a)(t),[y(e)]))}},"New"),i.a.createElement("button",{className:"rounded",id:"compress",title:"Remove empty groups",onClick:function(){if(window.confirm("Delete all empty groups?")){var e,a=t.filter((function(e){return v(e)>0})),i=t.filter((function(e){return 0===v(e)})),l=Object(o.a)(i);try{for(l.s();!(e=l.n()).done;){var c=e.value;delete E[c]}}catch(d){l.e(d)}finally{l.f()}if(a.length>0){n(a);var u=a[a.length-1];r(u),s(u)}else r("Group 1"),s("Group 1"),n(["Group 1"]),h({"Group 1":""})}}},"Compress"),i.a.createElement("button",{className:"rounded",id:"dReset",title:"Reset groups",onClick:function(){window.confirm("Reset all groups and their contents?")&&(f([]),g([]),b([]),r("Group 1"),s("Group 1"),n(["Group 1"]),h({"Group 1":""}))}},"Reset")))},Ce=function(e){var t=e.points,n=e.setPoints,r=e.lines,l=e.setLines,o=e.areas,s=e.setAreas,d=e.toggleShowInput,p=e.toggleShowOutput,m=e.showSidebar,f=e.toggleShowSidebar,g=(e.showSnap,e.toggleShowSnap),b=e.activeGid,E=e.setActiveGid,h=e.displayGid,v=e.setDisplayGid,y=e.gids,O=e.setGids,j=e.masterProps,A=e.setMasterProps,x=Object(a.useState)(!1),w=Object(c.a)(x,2),k=w[0],S=w[1];return i.a.createElement("div",{id:"sidebar",style:{width:"384px",minWidth:"384px",height:"100%",position:"absolute",top:"0",left:"0",backgroundColor:"rgb(3, 11, 26)",overflowY:"auto",zIndex:"1000"}},i.a.createElement("div",{style:{display:"flex",fontFamily:"Comfortaa",color:"white"}},i.a.createElement("div",null,i.a.createElement("h1",null,"descartes v2.0")),i.a.createElement("div",{style:{display:"flex",alignItems:"center",float:"right"}},i.a.createElement("button",{className:"collapse",title:m?"collapse":"expand",onClick:function(){f(!m)}},i.a.createElement("img",{src:le.a,alt:"Menu",width:"14px"})))),i.a.createElement("div",{className:"form-container"},i.a.createElement(Se,{gids:y,setGids:O,activeGid:b,setActiveGid:E,displayGid:h,setDisplayGid:v,points:t,lines:r,areas:o,setPoints:n,setLines:l,setAreas:s,masterProps:j,setMasterProps:A})),i.a.createElement("div",{className:"form-container"},i.a.createElement("button",{className:"rounded",id:"utils",title:"Input geoJSON",onClick:function(){d(!0)}},"Input"),i.a.createElement("button",{className:"rounded",id:"utils",title:"Output geoJSON",style:{marginLeft:"10px"},onClick:function(){p(!0)}},"Output"),i.a.createElement("button",{className:"rounded",id:"utils",title:"Remote geoJSON",style:{marginLeft:"10px"},onClick:function(){S(!k)}},"Remote")),k?i.a.createElement(ge,{points:t,setPoints:n,lines:r,setLines:l,areas:o,setAreas:s,toggleShowInline:S,activeGid:b,gids:y,setGids:O,masterProps:j,setMasterProps:A}):null,i.a.createElement("div",{className:"form-container"},i.a.createElement("div",{style:{display:"flex",alignItems:"baseline"}},i.a.createElement("p",null,"Points (".concat(t.filter((function(e){return e.gid===h})).length,")")),i.a.createElement("img",{src:ce.a,alt:"i1",width:"10px",style:{marginLeft:"6px"}})),i.a.createElement(he,{points:h?t.filter((function(e){return e.gid===h})):t,setPoints:n}),i.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a,i,r=e.target.elements[0].value.split(",");if(a=r[0],i=r[1],""!==a&&""!==i&&!isNaN(a)&&!isNaN(i)&&Math.abs(+a)<=90&&Math.abs(+i)<=180){var l={gid:b,name:"P".concat(t.length+1),coordinates:[Number(r[1]),Number(r[0])]};n([].concat(Object(u.a)(t),[l])),e.target.reset()}else alert("Enter valid coordinates in input field!")}},i.a.createElement("label",{style:{fontSize:"20px",marginLeft:"0",marginRight:"5px"}},i.a.createElement("b",null,"+")),i.a.createElement("input",{id:"coords",type:"text",placeholder:"<Latitude>, <Longitude>",autoComplete:"off"}),i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("button",{className:"rounded",type:"submit"},"Add"),i.a.createElement("button",{className:"rounded",id:"dReset",title:"Reset Points",onClick:function(e){e.preventDefault();var a=t.filter((function(e){return e.gid!==h}));t.length>a.length&&window.confirm("Delete all points from active group?")&&n(a)}},"Reset")))),i.a.createElement("div",{className:"form-container"},i.a.createElement("div",{style:{display:"flex",alignItems:"baseline"}},i.a.createElement("p",null,"Lines (".concat(r.filter((function(e){return e.gid===h})).length,")")),i.a.createElement("img",{src:ue.a,alt:"i2",height:"10px",style:{marginLeft:"6px"}})),i.a.createElement(je,{entities:h?r.filter((function(e){return e.gid===h})):r,setEntities:l,type:"lines"}),i.a.createElement("button",{className:"rounded",id:"snap",title:"Snap to road",style:{marginLeft:"0"},onClick:function(){g(!0)}},"Snap"),i.a.createElement("button",{className:"rounded",id:"dReset",title:"Reset Lines",style:{marginLeft:"10px"},onClick:function(e){e.preventDefault();var t=r.filter((function(e){return e.gid!==h}));r.length>t.length&&(window.confirm("Delete all lines from active group?")&&l(t))}},"Reset")),i.a.createElement("div",{className:"form-container"},i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement("p",null,"Areas (".concat(o.filter((function(e){return e.gid===h})).length,")")),i.a.createElement("img",{src:pe.a,alt:"i3",width:"30px",style:{marginLeft:"6px"}})),i.a.createElement(je,{entities:h?o.filter((function(e){return e.gid===h})):o,setEntities:s,type:"areas"}),i.a.createElement("button",{className:"rounded",id:"dReset",title:"Reset Lines",style:{marginLeft:"0"},onClick:function(e){e.preventDefault();var t=o.filter((function(e){return e.gid!==h}));o.length>t.length&&(window.confirm("Delete all polygons from active group?")&&s(t))}},"Reset")))},Ne=function(e){e.showOutput;var t=e.toggleShowOutput,n=e.points,r=e.lines,l=e.areas,o=e.gids,s=e.activeGid,u=e.masterProps,d=Object(a.useState)(!1),p=Object(c.a)(d,2),m=p[0],f=p[1],g=Object(a.useState)(s),b=Object(c.a)(g,2),E=b[0],h=b[1],v="All"===E?n:n.filter((function(e){return e.gid===E})),y="All"===E?r:r.filter((function(e){return e.gid===E})),O="All"===E?l:l.filter((function(e){return e.gid===E})),j=function(e,t,n){var a=e.map((function(e){return{type:"Feature",properties:e.properties?e.properties:{},geometry:{type:"Point",coordinates:e.coordinates}}})),i=t.map((function(e){return{type:"Feature",properties:e.properties?e.properties:{},geometry:{type:"LineString",coordinates:e.points.map((function(e){return e.coordinates}))}}})),r=n.map((function(e){return{type:"Feature",properties:e.properties?e.properties:{},geometry:{type:"Polygon",coordinates:[e.points.map((function(e){return e.coordinates})).concat([e.points[0].coordinates])]}}})),l=a.concat(i,r),o={type:"FeatureCollection",properties:"All"===E?u:u[E]||{},features:l};return JSON.stringify(o,void 0,2)};return i.a.createElement("div",{className:"output"},i.a.createElement("div",{className:"form-container",id:"output"},i.a.createElement("div",{style:{display:"flex",width:"100%",position:"relative"}},i.a.createElement("p",null,"GeoJSON Output"),m?i.a.createElement("p",{style:{color:"rgb(30, 165, 17)",marginLeft:"12px"}},"Copied to clipboard"):null,i.a.createElement("button",{className:"blank",id:"close",title:"close",onClick:function(){t(!1)}},i.a.createElement("img",{src:Ee.a,alt:"close",width:"15px"}))),i.a.createElement("div",{style:{color:"rgb(50, 50, 50)"}},"".concat(v.length," points, ").concat(y.length," lines, ").concat(O.length," polygons")),i.a.createElement("select",{onChange:function(e){e.target.value&&h(e.target.value),console.log(e.target.value)},value:E},o.map((function(e){return i.a.createElement("option",{key:I()()},e)})),i.a.createElement("option",{key:I()()},"All")),i.a.createElement("div",{id:"output-coords"},i.a.createElement("pre",{id:"out-geojson",contentEditable:"true",suppressContentEditableWarning:!0,style:{outline:"none"}},j(v,y,O))),i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("button",{className:"rounded",id:"copy",title:"copy",onClick:function(){var e=document.getElementById("out-geojson").textContent;navigator.clipboard.writeText(e).then((function(){f(!0)})).then((function(){setTimeout((function(){f(!1)}),5e3)}))}},"Copy"),i.a.createElement("button",{className:"rounded",style:{marginLeft:"10px"},onClick:function(){document.getElementById("out-geojson").textContent=j(v,y,O)}},"Regenerate"))))},Ge=n(59),Pe=n.n(Ge),Ie=n(60),Le=n.n(Ie),Be=n(61),Me=n.n(Be),De=n(62),Te=n.n(De),Je=n(63),Re=n.n(Je),Fe=function(e){var t=e.showLanding,n=e.toggleShowLanding,a=!t;return i.a.createElement("div",{className:"landing"},i.a.createElement("div",{className:"view",id:"intro"},i.a.createElement("h1",null,"descartes v2.0"),i.a.createElement("h2",null,"A simple map-marking tool, developed by the team at ",i.a.createElement("strong",null,i.a.createElement("a",{href:"https://www.nawgati.com/"},"Nawgati"))),i.a.createElement("div",{className:"social"},i.a.createElement("a",{href:"https://www.nawgati.com/",title:"Nawgati"},i.a.createElement("img",{src:Re.a,alt:"Nawgati",height:"20px"})),i.a.createElement("a",{href:"https://github.com/nawgati/"},i.a.createElement("img",{src:Le.a,className:"bottom-icon",alt:"github",width:"20px"})),i.a.createElement("a",{href:"https://www.linkedin.com/company/nawgati"},i.a.createElement("img",{src:Te.a,className:"bottom-icon",alt:"linkedin",width:"20px"})),i.a.createElement("a",{href:"https://www.instagram.com/nawgati/"},i.a.createElement("img",{src:Me.a,className:"bottom-icon",alt:"instagram",width:"20px"})))),i.a.createElement("div",{className:"view",id:"hero"},i.a.createElement("img",{src:Pe.a,alt:"main",title:"Descartes",width:"100%"}),i.a.createElement("div",{id:"btn-grp"},i.a.createElement("button",{className:"rounded",id:"proceed",onClick:function(){setTimeout(n(!1),1e3)}},"Proceed")),i.a.createElement("div",{style:{marginTop:"40px",display:"flex",color:"white",justifyContent:"center",alignItems:"center"}},i.a.createElement("input",{type:"checkbox",id:"ch",onChange:function(){localStorage.setItem("showLanding",JSON.stringify(a)),a=!a}}),i.a.createElement("label",null,"Skip this page the next time"))))},Ye=function(e){e.showSnap;var t=e.toggleShowSnap,n=e.lines,r=e.setLines,l=e.tempMarks,o=e.setTempMarks,s=e.activeGid,d=Object(a.useState)(null),p=Object(c.a)(d,2),m=p[0],f=p[1],g=function(e){window.alert("Snap functionality is temporarily disabled")};return i.a.createElement("div",{className:"form-container",id:"snap-menu"},i.a.createElement("div",{style:{display:"flex",width:"100%",position:"relative",marginBottom:"15px"}},i.a.createElement("strong",null,i.a.createElement("p",null,"Snap a line to the nearest road")),i.a.createElement("button",{className:"blank",id:"close",title:"Close",onClick:function(){o([]),t(!1)}},i.a.createElement("img",{src:Ee.a,alt:"close",width:"15px"}))),i.a.createElement("div",{className:"dlist"},n.filter((function(e){return e.gid===s})).map((function(e){var t=e.points;return i.a.createElement("div",{key:I()()},i.a.createElement("div",{key:I()(),style:{display:"flex",alignItems:"center",marginBottom:"5px",marginTop:"5px"}},i.a.createElement("label",{style:{margin:0}},"LineString ".concat(n.indexOf(e)+1)),i.a.createElement("input",{id:"radio",name:"radio",type:"radio",value:"".concat(n.indexOf(e))})),t.map((function(e){return i.a.createElement("div",{key:I()(),style:{color:"blue",display:"flex",alignItems:"baseline",marginLeft:"15px"}},i.a.createElement("p",null,"".concat(t.indexOf(e)+1,".  [").concat(e.coordinates[1].toFixed(8),", ").concat(e.coordinates[0].toFixed(8),"]")))})))}))),i.a.createElement("button",{className:"rounded",id:"snap-ext",title:"Snap line",style:{marginLeft:0},onClick:function(e){e.preventDefault();var t=document.querySelector('input[name="radio"]:checked')?document.querySelector('input[name="radio"]:checked').value:null;t&&(f(t),g(n[t]))}},"Snap"),i.a.createElement("button",{className:"rounded",id:"snap-ext",title:"Reverse line and snap",onClick:function(e){e.preventDefault();var t=document.querySelector('input[name="radio"]:checked')?document.querySelector('input[name="radio"]:checked').value:null;t&&(f(t),g(function(e){var t=e.points.slice();t.reverse(),e.gid}(n[t])))}},"Reverse snap"),i.a.createElement("button",{className:"rounded",id:"snap-ext",title:"Apply change",onClick:function(e){if(e.preventDefault(),m&&l.length){var t=Object(u.a)(n);t.splice(m,1,{gid:s,points:l}),r(t)}}},"Apply"))},We=function(e){e.showInput;var t=e.toggleShowInput,n=e.points,r=e.lines,l=e.areas,d=e.setPoints,p=e.setLines,m=e.setAreas,f=e.gids,g=e.setGids,b=e.activeGid,E=e.masterProps,h=e.setMasterProps,v=Object(a.useState)(!1),y=Object(c.a)(v,2),O=y[0],j=y[1],A=function(e){var t=Object(u.a)(e);return t.pop(),t},x=function(e,t){var a="Group "+(f.length+1);a=function e(t){return f.includes(t)?e("Group "+(+t.replace("Group ","")+1)):t}(a);try{var i=e.features,c=e.properties||{},v=i.filter((function(e){return"Point"===e.geometry.type})),y=i.filter((function(e){return"LineString"===e.geometry.type})),O=i.filter((function(e){return"Polygon"===e.geometry.type}));(function(e,t,n){var a=0;a+=e.length;var i,r=Object(o.a)(t);try{for(r.s();!(i=r.n()).done;){a+=i.value.geometry.coordinates.length}}catch(s){r.e(s)}finally{r.f()}var l,c=Object(o.a)(n);try{for(c.s();!(l=c.n()).done;){a+=l.value.geometry.coordinates.length}}catch(s){c.e(s)}finally{c.f()}return a})(v,y,O=O.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{geometry:{type:"Polygon",coordinates:e.geometry.coordinates[0]}})})))>1e3&&(alert("Warning: Heavy dataset loaded. This will be rendered as static geoJSON in a separate group."),t=1);var x=v.map((function(e){return{properties:e.properties?e.properties:{},gid:t?a:b,coordinates:e.geometry.coordinates}})),w=y.map((function(e){return{properties:e.properties?e.properties:{},gid:t?a:b,points:e.geometry.coordinates.map((function(e){return{gid:t?a:b,coordinates:e}}))}})),k=O.map((function(e){return{properties:e.properties?e.properties:{},gid:t?a:b,points:A(e.geometry.coordinates.map((function(e){return{gid:t?a:b,coordinates:e}})))}}));t&&g([].concat(Object(u.a)(f),[a]));var S=Object(s.a)({},E);S[t?a:b]=c,h(S),d([].concat(Object(u.a)(n),Object(u.a)(x))),p([].concat(Object(u.a)(r),Object(u.a)(w))),m([].concat(Object(u.a)(l),Object(u.a)(k))),j(!0)}catch(C){console.log("Invalid geoJSON object(s) entered")}};return Object(a.useEffect)((function(){O&&setTimeout((function(){j(!1)}),5e3)}),[O]),i.a.createElement("div",{className:"output"},i.a.createElement("div",{className:"form-container",id:"output"},i.a.createElement("div",{style:{display:"flex",width:"100%",position:"relative"}},i.a.createElement("p",null,"GeoJSON Input"),O?i.a.createElement("p",{style:{color:"rgb(30, 165, 17)",marginLeft:"12px"}},"geoJSON accepted"):null,i.a.createElement("button",{className:"blank",id:"close",title:"close",onClick:function(){t(!1)}},i.a.createElement("img",{src:Ee.a,alt:"close",width:"15px"}))),i.a.createElement("div",{id:"output-coords"},i.a.createElement("pre",{id:"out-geojson",contentEditable:"true",style:{outline:"none",minHeight:"30px"},onFocus:function(){navigator.clipboard.readText().then((function(e){document.getElementById("out-geojson").innerText=e}))}})),i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("button",{className:"rounded",id:"copy",title:"Insert to new group",onClick:function(){var e=document.getElementById("out-geojson").innerText;if(e)try{var t=JSON.parse(e);x(t,1)}catch(n){alert("Invalid JSON in input field!")}}},"Insert"),i.a.createElement("button",{className:"rounded",id:"append",style:{marginLeft:"10px"},title:"Append to active group",onClick:function(){var e=document.getElementById("out-geojson").innerText;if(e)try{var t=JSON.parse(e);x(t,0)}catch(n){alert("Invalid JSON in input field!")}}},"Append"),i.a.createElement("button",{className:"rounded",id:"dReset",title:"Clear input",style:{marginLeft:"10px"},onClick:function(){document.getElementById("out-geojson").innerText=""}},"Clear"))))},Qe=function(){var e={display:"flex",position:"relative",flexWrap:"nowrap",width:"100vw",height:window.innerHeight},t=JSON.parse(localStorage.getItem("sessionData")),n=function(){var e={points:u,lines:f,areas:h,gids:te,activeGid:H,masterProps:se};localStorage.setItem("sessionData",JSON.stringify(e)),sessionStorage.setItem("showLanding",JSON.stringify(M))};Object(a.useEffect)((function(){window.addEventListener("beforeunload",n)}));var r,l=Object(a.useState)(t&&t.points&&t.points.length?t.points:[{gid:"Group 1",coordinates:[77.516233,28.494164]}]),s=Object(c.a)(l,2),u=s[0],d=s[1],p=Object(a.useState)(t&&t.lines?t.lines:[{gid:"Group 1",points:[{gid:"Group 1",coordinates:[77.536233,28.494164]},{gid:"Group 1",coordinates:[77.556233,28.494164]},{gid:"Group 1",coordinates:[77.546233,28.492164]}]}]),m=Object(c.a)(p,2),f=m[0],g=m[1],b=Object(a.useState)(t&&t.areas?t.areas:[{gid:"Group 1",points:[{gid:"Group 1",coordinates:[77.531337,28.50721867]},{gid:"Group 1",coordinates:[77.53786711,28.5021375]},{gid:"Group 1",coordinates:[77.53892413,28.51272691]},{gid:"Group 1",coordinates:[77.53150213,28.51518115]}]}]),E=Object(c.a)(b,2),h=E[0],v=E[1],y=Object(a.useState)(!1),O=Object(c.a)(y,2),j=O[0],A=O[1],x=Object(a.useState)(!1),w=Object(c.a)(x,2),k=w[0],S=w[1],C=Object(a.useState)(window.innerWidth>1e3),N=Object(c.a)(C,2),G=N[0],P=N[1],I=!1!==JSON.parse(localStorage.getItem("showLanding"))&&(null===JSON.parse(sessionStorage.getItem("showLanding"))||!0===JSON.parse(sessionStorage.getItem("showLanding"))),L=Object(a.useState)(I),B=Object(c.a)(L,2),M=B[0],D=B[1],T=Object(a.useState)(!1),J=Object(c.a)(T,2),R=J[0],F=J[1],Y=Object(a.useState)([]),W=Object(c.a)(Y,2),Q=W[0],U=W[1],V=Object(a.useState)(t&&t.activeGid?t.activeGid:"Group 1"),K=Object(c.a)(V,2),H=K[0],z=K[1],Z=Object(a.useState)(H),X=Object(c.a)(Z,2),q=X[0],_=X[1],$=Object(a.useState)(t&&t.gids?t.gids:["Group 1"]),ee=Object(c.a)($,2),te=ee[0],ne=ee[1],ae={},re=Object(o.a)(te);try{for(re.s();!(r=re.n()).done;){ae[r.value]={}}}catch(de){re.e(de)}finally{re.f()}var oe=Object(a.useState)(t&&t.masterProps?t.masterProps:ae),ce=Object(c.a)(oe,2),se=ce[0],ue=ce[1];return i.a.createElement("div",{className:"App",style:e},M?i.a.createElement(Fe,{showLanding:M,toggleShowLanding:D}):null,G?null:window.innerWidth>1e3?i.a.createElement("div",{id:"title"},i.a.createElement("div",null,i.a.createElement("h1",null,"descartes v2.0")),i.a.createElement("div",{style:{display:"flex",alignItems:"center",float:"right"}},i.a.createElement("button",{className:"collapse",title:G?"collapse":"expand",onClick:function(){P(!G)}},i.a.createElement("img",{src:le.a,alt:"Menu",width:"12px"})))):i.a.createElement("div",{style:{display:"flex",alignItems:"center",position:"absolute",left:"6px",top:"22.5px",zIndex:"3500"}},i.a.createElement("button",{className:"collapse",title:G?"collapse":"expand",onClick:function(){P(!G)}},i.a.createElement("img",{src:le.a,alt:"Menu",width:"12px"}))),i.a.createElement(ie,{points:u,setPoints:d,lines:f,setLines:g,areas:h,setAreas:v,showSidebar:G,tempMarks:Q,setTempMarks:U,activeGid:H,setActiveGid:z,displayGid:q,setDisplayGid:_,gids:te,setGids:ne}),G?i.a.createElement(Ce,{points:u,setPoints:d,lines:f,setLines:g,areas:h,setAreas:v,toggleShowInput:S,toggleShowOutput:A,showSidebar:G,toggleShowSidebar:P,showSnap:R,toggleShowSnap:F,activeGid:H,setActiveGid:z,displayGid:q,setDisplayGid:_,gids:te,setGids:ne,masterProps:se,setMasterProps:ue}):null,R?i.a.createElement(Ye,{lines:f,setLines:g,showSnap:R,toggleShowSnap:F,tempMarks:Q,setTempMarks:U,activeGid:H}):null,j?i.a.createElement(Ne,{showOutput:j,toggleShowOutput:A,points:u,lines:f,areas:h,gids:te,activeGid:H,masterProps:se}):null,k?i.a.createElement(We,{showInput:k,toggleShowInput:S,points:u,setPoints:d,lines:f,setLines:g,areas:h,setAreas:v,activeGid:H,gids:te,setGids:ne,masterProps:se,setMasterProps:ue}):null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Qe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[64,1,2]]]);
//# sourceMappingURL=main.08a6cb69.chunk.js.map