(this.webpackJsonpdescartes=this.webpackJsonpdescartes||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/close.8b20cee7.svg"},,,,function(e,t,a){e.exports=a.p+"static/media/menu.4aaf92d0.svg"},,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/earth.11093ee1.svg"},function(e,t,a){e.exports=a.p+"static/media/regmap.07ddfa3b.svg"},function(e,t,a){e.exports=a.p+"static/media/point.5f83c812.svg"},function(e,t,a){e.exports=a.p+"static/media/graph.cc27234c.svg"},function(e,t,a){e.exports=a.p+"static/media/area.0574f801.svg"},function(e,t,a){e.exports=a.p+"static/media/layers.2ddc5da1.svg"},function(e,t,a){e.exports=a.p+"static/media/pencil.bdced74c.svg"},function(e,t,a){e.exports=a.p+"static/media/marker1.3f22cecd.svg"},function(e,t,a){e.exports=a.p+"static/media/marker3.ba8612b6.svg"},function(e,t,a){e.exports=a.p+"static/media/marker2.2816d43b.svg"},function(e,t,a){e.exports=a.p+"static/media/marker4.7a9f1bc6.svg"},function(e,t,a){e.exports=a.p+"static/media/indicator1.0b77f2e2.svg"},function(e,t,a){e.exports=a.p+"static/media/indicator2.5deb1712.svg"},function(e,t,a){e.exports=a.p+"static/media/indicator3.f93caf92.svg"},function(e,t,a){e.exports=a.p+"static/media/descartes_big.8c90f56f.svg"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzlFQkFERkU4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzlFQkFERkQ4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJFOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJGOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Kk5lQwAABYxJREFUeNrkm29oVXUYx3+7bM3V1FnbqlltrtXWtYRa1nqxooY5E7EhKWGuaTDBagol9SIMDCKICASj+cISw/DPi16ZBakrUBnoC7nNoTMWy6I1c+LmVq6t78N9jpyu555znt855+536IHPi939/jzP95zznN+/kzc1NaUitirwJJgPasF94DZQDG7hMqNgBFwEZ5kU+AH0R+lcXgQCJMBT4EXwLKgM2N7P4FvwJegCk6YKUA5eB23grogu2C/gc7AN/GGKABTsZtAOZqjc2DjYAT5kUfSNBNCkAGwGo1PTZ6PsQ4FuHLp3QD3YDR5QZtgZsAac1ElYokcGbATHDApesS/kUwf7GEkOKAK7wAvKbNsPXgZjYQowG3wNnlDxsONgCbgchgAU/GHwiIqXUT5o8hLBKwfcDA7FMHgrUR/iGLQEoGTyBWhQ8bUGjiFPR4A3QIuKv7VwLKIcQMnue5Dv0fjT/IwtAM3g+RyMBmkU+BXf3qc5Rx3xqDPBE7LjfkaCheCcj1HYKYe6JeBt8GcEo75L3HaJQ7+nfNQ/x7H9p67TFX4L1Pi4EocdfhsGH4BPwVbwqu0xGwI/8vT2N/77Gv+vAJSCO3n6PJ//Vjz72w62cPtORnfAwx7+1nBsW93ugGow7vOKtPkYa9eDl0Clxji9kuvW+yjb5tPncY7xet3MhjoFt2RzgIlU2DQL/O6017W/Be4BawXJqMCgTH+ToOxajvWG1+AmYVBlBglQKrxwmzIFoB9XCzt91CABpL6sti62JcBiXtKS2GMGCSD1pZxjvi7AKmED9PraYJAAG2yvVL+2yi7AImHl90C3QQJ03/B+97ZF1lCYVlN6BBV/BffykNQkoyF4H5grqJOkO6BR2NF2A4O35gifCOs0JjTW9vYaPPPbJ11LJAFqBRVoDf68wQLQI3BBUL424XPiY1lvDOb/ZwRla0iAOYIKv8dAgEFB2VtJgJmCChMxEEAyHigmAQoFFWbFQIDZgrKF0p2hmTEQQOQjCTAmKD8vBgJUCcqOkQBXBBXosEORwcEXKdmBjCskwICgQr5h0+BMW6i8V7LtNkAC9As7WWqwAM8Jy/cnhBMhspVKvq2eC0uwbxLrSWhMa+dpdJQLW6mRpLtpOlyuMcL7CTwErhoSPG2ApjQEuD3BQ0fp0ZJqlT6pZYpt0wieYh60nuWDGp2+At4xIPgt7IvU0jHzBkFdgD27HWDGNGyGFHHfulaXuTN0IkBjZ8EykJeDwKmPFtAXwN8TTltjrVkKfwcawXJW3G3v8DTYCKoiCLwGvAl6QthpbnU6J5jP2f1uh1Wgxbbxwv0qvT/vtZRGA6wuzs50+Pkb8JdgQtPMq1VJld7bnxtSzhjgJD5hzwEW611OZK6xlSvzeYbAsl3Cx4PK7ozodOl6t93hfJByqbzOVnYh+MdHhxfBLI1bnuoMhRx8imPMKgDR5LG/nrSVfddHpx8HeO4/ClmApsw+snXsdk7gYMat+r5Hp0sDCLAkxOA7nfrI1nGxx2tmQUb5x8FuzgvD4Dw4wNm2MIAA1SEF38cx+RaAeBCMZGlwb44GOyUhBD/CsTj24TatpddXq3L+RIVmXnE4QzjJMaSylvBxFdqzKHsVrDD8Dmj36sOvIx0unewHDRENg4MI0BH2FyP0RcZOlzW3Ib7VLvPqDK0z1PEq7bDmLVwCLgnr0AhvnUp/0eJp0k9m6HO4fUp2nGZODgUY5PzUJVlHkxg1TEfnjxqY8I6yb12SSjqLm7T9/Ax4TaW/+JxuIx862KcL4toBk1QFT1omXZLRHQHaL3Npl/r8jH3QjiGsbJ3kGd/fDo6WBWi31KG9a9xXMgzfw35tVfCR9l52dk8Ibe7htnq57YowfY7i4+lYWUL9z+1fAQYACqstE4NCc18AAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABACAYAAABFqxrgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATwSURBVHgB3ZyNVdswEMcvPAbIBnUngE5QM0HZgHQC2CDuBLQTJJ0AOkHcCUonsJkANvj3DsmPPKOTbX00Mb/3hF1bOkvn00knK11QAACWfCg5FZzOOC3t+XIv27L371hax7kcHzk9SFosFi0FsBib0Tb8mkzjSzpOWk73nH6EKsSJNJ7TmtMT5sWGU0GxsJArzK/xfdZD7Vx4FCCFK3ofiM+44C7y7LrpVAIr4JYPNxTGs005iHG2LadPLkW8UcJICxBBot1fVricP2uazgFMf+9SyemzPfchI8inIcGrgf4l/qGCGSmODq7XJadmoA23PgHFgIDtsTa+j31RPkqt4NpTqKKZAb9V77RCjVLgjmYK1/0GY63Bo7UGKSYcGcDrJK6x6c5VV3nrStu+9zPeKRlDh8nscN3+OOorjvu8l69U2vbUF6jNCgs6QjCxv0O3hlLun9gTl9evkwYhaTn33Csd136RR84p6TOw35QBmGG2oLcNaclMZnJMuB6U62ddpbQx9ZISAePEbjxmuY/09VtfV4Tez4U75fnOZ3UZtkqGktI0fo3wSHQDRRlwv7zGk99Vh6a7qY0MHyhOAZdIF4avlWesbP0leafzcM+DnrqbOyRWAvyzz1B2iJi2wz2kQu6daIXYQT1SAMi3DlFyilGE6nBPKSEYH4bLOuBfeq2YNExGi6FwWPKI47uglECJGWgiGA7DG5gRYjkgp0RMOKzL1X1fCiXAjAKNp9KTw3CEhsO6vG1uJayhU1EgCAmHdVmTldBMfECjPGBDkWBKOOyXoyrhhCJhIStyO7OW0zeKhEcpCXlr5XaSWW20EpgvyvVvCQMwTZlXlIAUSiiV6zUlgpVZK/LEIZ9TJFFKsBX4X2G4FtUeVgmkh+F/KT1aOFxQJCm6g4scawKazOjPALksYVbEKiHb25kgM9rqYpXQKtfPKD2aA3ygSKKUYEcA15uQICi1NWjzkZYiSeEYtTdxQ4mAWTJzWYJ8CT+sJVi05ezrhNaghc73lIAUStiSu0uIAibH/X1YkbJZTIsRflIK4FuAHC/DF/uvKRCYPVMa2UPp1Isq8h1h6qLKNfwUE+XlVYJ9SDlQ6QYm7B4jZzcgq6KJQFlek3sLmK8wbzwve93RGz33HlTxYcj8xX/UZAKi/YVWWeJf0fBEa3jfkbtu0n3K/vWXdmpap0C46Hfko0HgiONr54mnUNDHF1aszA+iV5Qc1KRswYtFlJBcKFe04sNXSjCbs8gq1UWkAgrHtfblL3SvGb1YAbMjbotwdinqYevi+i768lVaLKFVykU/XGILTis+/UjGMuoRxVoy3enCvv3oabH1Iy5f8mJZp5RRCR020NpKshUS2cVexbqtwHWmTRpaW1r5I0rw7+JIjG1kTf8XTQlmGRBmtqftI3gXK0cY2Lg1lKmimQPjnF00/Yzap66nuVsDzJYfF5t+Rl+XiA6HDwX8QVjpKpAlHD4U8Ad06gZvnzXMyiIQE4bD7Djz0WBEOHwokCoMx/AOkU4ZG5hNFOc4gPOEsdzCvrhbDG/xEf64ZGk/BNtS2GfvbubXP4+lP+0taDreX8Q5GWkRc2GHUGuFMfcG86aiWBAfDh+KHUYuxk75wXhBZo3uio77B+PyLeJ+Sgg+eTFVwOt/HSDRmSzDFfZWsZetoLS0e+ed05Vrj/YYvDvmH/UlUvwlo7csAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGeSURBVHgB7ZiNUcJAEIVfGAuADo4KpAStQDqQDrQDsAJLADrACogVYAekA+3gfAvHDBM1s8G4d3Hum1kuOTbJvtzfXoCA935Im9P2/sg7bUubIXUYpDsL/DuekSqK4E88IkUY2NLrkC41RGIMaBOlrwQ/RWK0ESA4JIYI+ECPEQFvLfxLpAYH5o1yEO+RKgxupZiBHFKGAS5+evO0NgPdlOL8JLxlmSpdqNoURVEik/m/FIhIyK1kgrgLpQt/VaGUNeqV43DTdBPtOrBtuIeGRe2aeZieNeyD/5dkcgBj/DF93/FwgWOCqMEF/52vrUemAsLDpSUvXVecXH8uwroFtvh9Rutoy9OJpYB7dJeOy7g97E0sBTh0y4P8mA/iDpFWGKYgoMLlm6ppLAEl7ZY24iI1po14PKY9oR2TK9izZsCzeiXrKhaS0ku5hA5n3QIVrfH7EoWsoN+6XlsLeGGAmv6+hhJrARulX6n0M+9C2i8g6lnJVICy+6j9BEsBFf6APq/EB7KA2GQBsckCYpMFxCYLiE0WEJssIDa9F/AJdhLQG0LsNw8AAAAASUVORK5CYII="},function(e,t,a){e.exports=a.p+"static/media/plogo.ad839e81.svg"},,function(e,t,a){e.exports=a(81)},,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(35),c=a.n(l),o=(a(62),a(6)),r=a(16),s=a(12),d=a(7),m=a(37),p=a.n(m),u=a(38),g=a.n(u),f=a(39),h=a.n(f),b=a(40),E=a.n(b),A=a(41),v=a.n(A),w=a(42),x=a.n(w),y=a(43),k=a.n(y),O=a(8),j=a(9),S=a(11),C=a(10),I=a(5),N=a.n(I),M=a(44),L=a.n(M),B=a(45),D=a.n(B),J=function(e){Object(S.a)(a,e);var t=Object(C.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props.points,t=this.props.setPoints,a="temp"===this.props.type;return e.map((function(n){return i.a.createElement(d.c,{key:N()(),latitude:n.coordinates[1],longitude:n.coordinates[0],draggable:!0,onDragEnd:function(a){var i=e.slice(),l=e.indexOf(n),c=Object(r.a)(Object(r.a)({},n),{},{coordinates:a.lngLat});i.splice(l,1,c),t(i)},offsetLeft:a?-12:-16,offsetTop:a?-12:-38.71},i.a.createElement("div",{title:"P".concat(e.indexOf(n)+1)},i.a.createElement("img",{src:a?D.a:L.a,alt:"marker",width:a?"24px":"32px",className:"marker"})))}))}}]),a}(n.PureComponent),F=a(46),G=a.n(F),T=function(e){Object(S.a)(a,e);var t=Object(C.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props.lines,t=this.props.setLines;return e.map((function(a){return a.points.map((function(n){return i.a.createElement(d.c,{key:N()(),latitude:n.coordinates[1],longitude:n.coordinates[0],draggable:!0,onDragEnd:function(i){var l=a.points.slice(),c=a.points.indexOf(n),o={gid:1,type:"Point",coordinates:i.lngLat};l.splice(c,1,o);var r=e.slice(),s=e.indexOf(a),d={gid:1,points:l};r.splice(s,1,d),t(r)},offsetLeft:-12,offsetTop:-12},i.a.createElement("div",{title:"L".concat(e.indexOf(a)+1)},i.a.createElement("img",{src:G.a,alt:"marker",width:"24px",className:"marker"})))}))}))}}]),a}(n.PureComponent),P=a(47),R=a.n(P),Y=function(e){Object(S.a)(a,e);var t=Object(C.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props.areas,t=this.props.setAreas;return e.map((function(a){return a.points.map((function(n){return i.a.createElement(d.c,{key:N()(),latitude:n.coordinates[1],longitude:n.coordinates[0],draggable:!0,onDragEnd:function(i){var l=a.points.slice(),c=a.points.indexOf(n),o={gid:1,type:"Point",coordinates:i.lngLat};l.splice(c,1,o);var r=e.slice(),s=e.indexOf(a),d={gid:1,points:l};r.splice(s,1,d),t(r)},offsetLeft:-12,offsetTop:-12},i.a.createElement("div",{title:"A".concat(e.indexOf(a)+1)},i.a.createElement("img",{src:R.a,alt:"marker",width:"24px",className:"marker"})))}))}))}}]),a}(n.PureComponent),Q=function(e){Object(S.a)(a,e);var t=Object(C.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e={type:"FeatureCollection",features:this.props.lines.map((function(e){return{type:"Feature",geometry:{type:"LineString",coordinates:e.points.map((function(e){return e.coordinates}))}}}))};return i.a.createElement(d.e,{id:"line",type:"geojson",data:e},i.a.createElement(d.b,{id:"line-layer",type:"line",paint:{"line-color":"rgb(200,200,200)","line-width":3},layout:{"line-cap":"round","line-join":"round"}}))}}]),a}(n.PureComponent),U=function(e){Object(S.a)(a,e);var t=Object(C.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e={type:"FeatureCollection",features:this.props.areas.map((function(e){return{type:"Feature",geometry:{type:"Polygon",coordinates:[e.points.map((function(e){return e.coordinates}))]}}}))};return i.a.createElement(d.e,{id:"area",type:"geojson",data:e},i.a.createElement(d.b,{id:"polygon-layer",type:"fill",paint:{"fill-color":"rgb(220,220,220)","fill-opacity":.45}}))}}]),a}(n.PureComponent),K=function(e){Object(S.a)(a,e);var t=Object(C.a)(a);function a(){var e;Object(O.a)(this,a);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).haverSine=function(e,t){var a=e[1]*Math.PI/180,n=t[1]*Math.PI/180,i=(t[1]-e[1])*Math.PI/180,l=(t[0]-e[0])*Math.PI/180,c=Math.sin(i/2)*Math.sin(i/2)+Math.cos(a)*Math.cos(n)*Math.sin(l/2)*Math.sin(l/2);return 6371e3*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))},e}return Object(j.a)(a,[{key:"render",value:function(){for(var e=this.props.destinations,t=[],a=[],n=0;n<e.length-1;n++)t.push([.5*(e[n][0]+e[n+1][0]),.5*(e[n][1]+e[n+1][1])]),a.push(this.haverSine(e[n],e[n+1]).toFixed(3));return t.map((function(e){return i.a.createElement(d.c,{key:N()(),latitude:e[1],longitude:e[0]},i.a.createElement("div",{style:{color:"rgb(180, 180, 180)",fontSize:"10.5px",backgroundColor:"rgba(0, 0, 0, 0.4)",padding:"5px",borderRadius:"5px"}},"".concat(a[t.indexOf(e)],"m")))}))}}]),a}(n.PureComponent),W=function(e){Object(S.a)(a,e);var t=Object(C.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props.entities;return"areas"===this.props.type?e.map((function(e){return i.a.createElement(K,{key:N()(),destinations:e.points.map((function(e){return e.coordinates})).concat([e.points[0].coordinates])})})):e.map((function(e){return i.a.createElement(K,{key:N()(),destinations:e.points.map((function(e){return e.coordinates}))})}))}}]),a}(n.PureComponent),V=[],z=0,H=function(e){var t=e.points,a=e.setPoints,l=e.lines,c=e.setLines,m=e.areas,u=e.setAreas,f=e.showSidebar,b=e.tempMarks,A=e.setTempMarks,w=t.length?t[t.length-1].coordinates:[77.516233,28.494164],y={position:"absolute",right:"0",top:"0",height:"100%",width:f?"calc(100vw - 384px)":"100vw"},O=Object(n.useState)({latitude:w[1],longitude:w[0],width:"fit",height:window.innerHeight,zoom:14}),j=Object(o.a)(O,2),S=j[0],C=j[1],I=Object(n.useState)(!1),N=Object(o.a)(I,2),M=N[0],L=N[1],B=Object(n.useState)(!0),D=Object(o.a)(B,2),F=D[0],G=D[1],P=Object(n.useState)(!0),R=Object(o.a)(P,2),K=R[0],H=R[1],Z=Object(n.useState)({draw:!1,init:!0}),X=Object(o.a)(Z,2),q=X[0],_=X[1],$=Object(n.useState)(null),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)([]),ie=Object(o.a)(ne,2),le=ie[0],ce=ie[1],oe=Object(n.useState)([]),re=Object(o.a)(oe,2),se=re[0],de=re[1],me=function(e){"Escape"===e.key&&(se.length&&(0===z?c([].concat(Object(s.a)(l),[{gid:1,points:se}])):1===z?se.length>2?u([].concat(Object(s.a)(m),[{gid:1,points:se}])):alert("Specify more than 2 nodes for polygon"):a([].concat(Object(s.a)(t),Object(s.a)(se)))),_({draw:!1,init:!0}),V=[],ae(null),de([]))};return Object(n.useEffect)((function(){return window.addEventListener("keydown",me),function(){window.removeEventListener("keydown",me)}})),Object(n.useEffect)((function(){var e=l.length;e&&0===l[e-1].points.length&&(V=[],ae(null))}),[l]),i.a.createElement("div",{id:"map",style:y},i.a.createElement(d.f,Object.assign({},S,{mapboxApiAccessToken:"pk.eyJ1IjoiZmVybWl2ZXJzZSIsImEiOiJja2Q2YzJ3Zjkwam1mMnFuMG1zNjg5eDhmIn0.SwCaqFKXTC_-WkcbYqFcsQ",mapStyle:M?"mapbox://styles/mapbox/satellite-v9":"mapbox://styles/fermiverse/ckd7yqq7u084t1iqj97nvbjc6",onViewportChange:function(e){C(Object(r.a)(Object(r.a)({},e),{},{width:"fit",height:"fit"}))},onClick:q.draw?function(e){if(q.init)_({draw:!0,init:!1});else{var t=e.lngLat;V=t,de([].concat(Object(s.a)(se),[{gid:1,coordinates:t}]))}}:null,onHover:q.draw?function(e){ce(e.lngLat),V&&V[0]&&ae(function(e,t){var a=e[1]*Math.PI/180,n=t[1]*Math.PI/180,i=(t[1]-e[1])*Math.PI/180,l=(t[0]-e[0])*Math.PI/180,c=Math.sin(i/2)*Math.sin(i/2)+Math.cos(a)*Math.cos(n)*Math.sin(l/2)*Math.sin(l/2);return 6371e3*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}(V,e.lngLat))}:null}),i.a.createElement("div",{style:{position:"absolute",right:"15px",top:"30px"}},i.a.createElement(d.d,null)),i.a.createElement("div",{style:{position:"absolute",top:"135px",right:"15px"}},i.a.createElement(d.a,{onViewportChange:function(e){C(Object(r.a)(Object(r.a)({},S),{},{latitude:w[1]||28.494164,longitude:w[0]||77.516233,zoom:14}))}})),i.a.createElement(J,{points:t,setPoints:a,type:""}),se.length?i.a.createElement(J,{points:se,setPoints:de,type:"temp"}):null,b.length?i.a.createElement(J,{points:b,setPoints:A,type:"temp"}):null,i.a.createElement(T,{lines:l,setLines:c}),i.a.createElement(Y,{areas:m,setAreas:u}),i.a.createElement("button",{className:"custom",id:"point",title:"Add a point",onClick:function(){q.draw?(V=[],z=0,ae(null),a([].concat(Object(s.a)(t),Object(s.a)(se))),de([])):z=2,_({draw:!q.draw,init:!0})}},i.a.createElement("img",{src:h.a,alt:"pt",width:"6px"})),i.a.createElement("button",{className:"custom",id:"line",title:"Add a line",onClick:function(){q.draw&&(V=[],ae(null),c([].concat(Object(s.a)(l),[{gid:1,points:se}])),de([])),z=0,_({draw:!q.draw,init:!0})}},i.a.createElement("img",{src:E.a,alt:"line",width:"17px"})),i.a.createElement("button",{className:"custom",id:"area",title:"Add a polygon",onClick:function(){q.draw?(V=[],z=0,ae(null),u([].concat(Object(s.a)(m),[{gid:1,points:se}])),de([])):z=1,_({draw:!q.draw,init:!0})}},i.a.createElement("img",{src:v.a,alt:"ar",width:"17px"})),q.draw?i.a.createElement("div",{className:"top-drawer",id:f?"no-drop":"drop"},i.a.createElement("p",null,"Draw Mode: ".concat(0===z?"Line":1===z?"Polygon":"Point",", press Esc to exit")),le[0]?i.a.createElement("p",null,"Latitude: ".concat(le[1].toFixed(6),", Longitude: ").concat(le[0].toFixed(6))):null,te?i.a.createElement("p",null,"Displacement: ".concat(te.toFixed(3),"m")):null):null,F?i.a.createElement(Q,{lines:l}):null,F?i.a.createElement(U,{areas:m}):null,K?i.a.createElement(W,{entities:l,type:"lines"}):null,K?i.a.createElement(W,{entities:m,type:"areas"}):null,i.a.createElement("button",{className:"blank",id:"measure",title:K?"Hide measures":"Show measures",onClick:function(){l.length||m.length?H(!K):H(!1)}},i.a.createElement("img",{src:k.a,alt:"Ms",width:"20px"})),i.a.createElement("button",{className:"blank",id:"GJ",title:F?"Hide Layers":"Show Layers",onClick:function(){l.length||m.length?G(!F):G(!1)}},i.a.createElement("img",{src:x.a,alt:"Layer",width:"26px"})),M?i.a.createElement("button",{className:"blank",id:"toggle",title:"Regular View",onClick:function(){L(!M)}},i.a.createElement("img",{src:g.a,alt:"mapicon",width:"30px"})):i.a.createElement("button",{className:"blank",id:"toggle",title:"Satellite View",onClick:function(){L(!M)}},i.a.createElement("img",{src:p.a,alt:"sat",width:"30px"})),i.a.createElement("button",{className:"rounded",id:"reset",title:"Reset Markers",onClick:function(){window.confirm("Clear all geoJSON entities and reset map?")&&(_({draw:!1,init:!0}),a([]),c([]),u([]),V=[],ae(null))}},"Reset")))},Z=a(15),X=a.n(Z),q=a(19),_=a.n(q),$=a(48),ee=a.n($),te=a(49),ae=a.n(te),ne=a(50),ie=a.n(ne),le=function(e){var t,a=e.points,n=e.setPoints,l=e.lines,c=e.setLines,o=e.areas,r=e.setAreas,d=(e.showOutput,e.toggleShowOutput,e.showSidebar),m=e.toggleShowSidebar,p=(e.showSnap,e.toggleShowSnap);return i.a.createElement("div",{id:"sidebar",style:{width:"384px",minWidth:"384px",height:"100%",position:"absolute",top:"0",left:"0",backgroundColor:"rgb(3, 11, 26)",overflowY:"auto",zIndex:"1000"}},i.a.createElement("div",{style:{display:"flex",fontFamily:"Comfortaa",color:"white"}},i.a.createElement("div",null,i.a.createElement("h1",null,"descartes v1.3")),i.a.createElement("div",{style:{display:"flex",alignItems:"center",float:"right"}},i.a.createElement("button",{className:"collapse",title:d?"collapse":"expand",onClick:function(){m(!d)}},i.a.createElement("img",{src:_.a,alt:"Menu",width:"12px"})))),i.a.createElement("div",{className:"form-container"},i.a.createElement("div",{style:{display:"flex",alignItems:"baseline"}},i.a.createElement("p",null,"POINT(S)"),i.a.createElement("img",{src:ee.a,alt:"i1",width:"10px",style:{marginLeft:"6px"}})),i.a.createElement("div",{className:"dlist"},a.length?a.map((function(e){return i.a.createElement("div",{key:N()(),style:{color:"blue",display:"flex",alignItems:"baseline"}},i.a.createElement("p",null,"".concat(a.indexOf(e)+1,".  [").concat(e.coordinates[1].toFixed(8),", ").concat(e.coordinates[0].toFixed(8),"]")),i.a.createElement("button",{className:"blank",title:"Clear",onClick:function(){var t=a.indexOf(e),i=a.slice();t>-1&&(i.splice(t,1),n(i))}},i.a.createElement("img",{src:X.a,alt:"close",width:"12px"})))})):null),"line"===(t="point")?i.a.createElement("div",null):"point"===t?i.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t,i,l=e.target.elements[0].value.split(",");if(t=l[0],i=l[1],""!==t&&""!==i&&!isNaN(t)&&!isNaN(i)&&Math.abs(+t)<=90&&Math.abs(+i)<=180){var c={gid:1,name:"P".concat(a.length+1),coordinates:[Number(l[1]),Number(l[0])]};n([].concat(Object(s.a)(a),[c])),e.target.reset()}else alert("Enter valid coordinates in input field!")}},i.a.createElement("label",{style:{fontSize:"20px",marginLeft:"0",marginRight:"5px"}},i.a.createElement("b",null,"+")),i.a.createElement("input",{id:"coords",type:"text",placeholder:" <Latitude>, <Longitude>",autoComplete:"off"}),i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("button",{className:"rounded",type:"submit"},"Add"),i.a.createElement("button",{className:"rounded",id:"dReset",title:"Reset Points",onClick:function(e){e.preventDefault(),n([])}},"Reset"))):void 0),i.a.createElement("div",{className:"form-container"},i.a.createElement("div",{style:{display:"flex",alignItems:"baseline"}},i.a.createElement("p",null,"LINE(S)"),i.a.createElement("img",{src:ae.a,alt:"i2",height:"10px",style:{marginLeft:"6px"}})),i.a.createElement("div",{className:"dlist"},l.map((function(e){var t=e.points;return i.a.createElement("div",{key:N()()},i.a.createElement("div",{key:N()(),style:{display:"flex",alignItems:"baseline",marginBottom:"5px",marginTop:"5px"}},i.a.createElement("p",null,"".concat(l.indexOf(e)+1,". LineString ").concat(l.indexOf(e)+1)),i.a.createElement("button",{className:"blank",title:"Clear",onClick:function(){var t=l.indexOf(e),a=l.slice();t>-1&&(a.splice(t,1),c(a))}},i.a.createElement("img",{src:X.a,alt:"close",width:"12px",style:{padding:"0"}}))),t.map((function(e){return i.a.createElement("div",{key:N()(),style:{color:"blue",display:"flex",alignItems:"baseline",marginLeft:"15px"}},i.a.createElement("p",null,"".concat(t.indexOf(e)+1,".  [").concat(e.coordinates[1].toFixed(8),", ").concat(e.coordinates[0].toFixed(8),"]")))})))}))),i.a.createElement("button",{className:"rounded",id:"dReset",title:"Reset Lines",style:{marginLeft:"0"},onClick:function(e){e.preventDefault(),c([])}},"Reset"),i.a.createElement("button",{className:"rounded",id:"snap",onClick:function(){p(!0)},title:"snap to road"},"Snap")),i.a.createElement("div",{className:"form-container"},i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement("p",null,"AREA(S)"),i.a.createElement("img",{src:ie.a,alt:"i3",width:"30px",style:{marginLeft:"6px"}})),i.a.createElement("div",{className:"dlist"},o.map((function(e){var t=e.points;return i.a.createElement("div",{key:N()()},i.a.createElement("div",{key:N()(),style:{display:"flex",alignItems:"baseline",marginBottom:"5px",marginTop:"5px"}},i.a.createElement("p",null,"".concat(o.indexOf(e)+1,". Polygon ").concat(o.indexOf(e)+1)),i.a.createElement("button",{className:"blank",title:"Clear",onClick:function(){var t=o.indexOf(e),a=o.slice();t>-1&&(a.splice(t,1),r(a))}},i.a.createElement("img",{src:X.a,alt:"close",width:"12px",style:{padding:"0"}}))),t.map((function(e){return i.a.createElement("div",{key:N()(),style:{color:"blue",display:"flex",alignItems:"baseline",marginLeft:"15px"}},i.a.createElement("p",null,"".concat(t.indexOf(e)+1,".  [").concat(e.coordinates[1].toFixed(8),", ").concat(e.coordinates[0].toFixed(8),"]")))})))}))),i.a.createElement("button",{className:"rounded",id:"dReset",title:"Reset Lines",style:{marginLeft:"0"},onClick:function(e){e.preventDefault(),r([])}},"Reset")))},ce=a(51),oe=a.n(ce),re=a(52),se=a.n(re),de=a(53),me=a.n(de),pe=a(54),ue=a.n(pe),ge=a(55),fe=a.n(ge),he=function(e){var t=e.showLanding,a=e.toggleShowLanding,n=!t;return i.a.createElement("div",{className:"landing"},i.a.createElement("div",{className:"view",id:"intro"},i.a.createElement("h1",null,"descartes v1.3"),i.a.createElement("h2",null,"A simple map-marking tool, developed by the team at ",i.a.createElement("strong",null,i.a.createElement("a",{href:"https://www.nawgati.com/"},"Nawgati"))),i.a.createElement("div",{className:"social"},i.a.createElement("a",{href:"https://www.nawgati.com/",title:"Nawgati"},i.a.createElement("img",{src:fe.a,alt:"Nawgati",height:"20px"})),i.a.createElement("a",{href:"https://github.com/nawgati/"},i.a.createElement("img",{src:se.a,className:"bottom-icon",alt:"github",width:"20px"})),i.a.createElement("a",{href:"https://www.linkedin.com/company/nawgati"},i.a.createElement("img",{src:ue.a,className:"bottom-icon",alt:"linkedin",width:"20px"})),i.a.createElement("a",{href:"https://www.instagram.com/nawgati/"},i.a.createElement("img",{src:me.a,className:"bottom-icon",alt:"instagram",width:"20px"})))),i.a.createElement("div",{className:"view",id:"hero"},i.a.createElement("img",{src:oe.a,alt:"main",title:"Descartes",width:"100%"}),i.a.createElement("div",{id:"btn-grp"},i.a.createElement("button",{className:"rounded",id:"proceed",onClick:function(){setTimeout(a(!1),1e3)}},"Proceed")),i.a.createElement("div",{style:{marginTop:"40px",display:"flex",color:"white",justifyContent:"center",alignItems:"center"}},i.a.createElement("input",{type:"checkbox",id:"ch",onChange:function(){localStorage.setItem("showLanding",JSON.stringify(n)),n=!n}}),i.a.createElement("label",null,"Skip this page the next time"))))},be=a(56),Ee=a.n(be),Ae=function(e){e.showSnap;var t=e.toggleShowSnap,a=e.lines,l=e.setLines,c=e.tempMarks,r=e.setTempMarks,d=Object(n.useState)(null),m=Object(o.a)(d,2),p=m[0],u=m[1],g=function(e){var t=e.points.map((function(e){return e.coordinates})).map((function(e){return String(e[1]+","+e[0])})).join("|");try{Ee.a.get("https://roads.googleapis.com/v1/snapToRoads?path=".concat(t,"&key=AIzaSyCyX-H1_PMVUFTL1Cv4wWwj6CN1U3mWtDc")).then((function(e){var t=e.data.snappedPoints;t=t.map((function(e){return{gid:1,coordinates:[e.location.longitude,e.location.latitude]}})),r(t)}))}catch(a){alert("Error occurred while snapping")}};return i.a.createElement("div",{className:"form-container",id:"snap-menu"},i.a.createElement("div",{style:{display:"flex",width:"100%",position:"relative",marginBottom:"15px"}},i.a.createElement("strong",null,i.a.createElement("p",null,"Snap a line to the nearest road")),i.a.createElement("button",{className:"blank",id:"close",title:"Close",onClick:function(){r([]),t(!1)}},i.a.createElement("img",{src:X.a,alt:"close",width:"15px"}))),i.a.createElement("div",{className:"dlist"},a.map((function(e){var t=e.points;return i.a.createElement("div",{key:N()()},i.a.createElement("div",{key:N()(),style:{display:"flex",alignItems:"center",marginBottom:"5px",marginTop:"5px"}},i.a.createElement("label",{style:{margin:0}},"LineString ".concat(a.indexOf(e)+1)),i.a.createElement("input",{id:"radio",name:"radio",type:"radio",value:"".concat(a.indexOf(e))})),t.map((function(e){return i.a.createElement("div",{key:N()(),style:{color:"blue",display:"flex",alignItems:"baseline",marginLeft:"15px"}},i.a.createElement("p",null,"".concat(t.indexOf(e)+1,".  [").concat(e.coordinates[1].toFixed(8),", ").concat(e.coordinates[0].toFixed(8),"]")))})))}))),i.a.createElement("button",{className:"rounded",id:"snap-ext",title:"Snap line",style:{marginLeft:0},onClick:function(e){e.preventDefault();var t=document.querySelector('input[name="radio"]:checked')?document.querySelector('input[name="radio"]:checked').value:null;t&&(u(t),g(a[t]))}},"Snap"),i.a.createElement("button",{className:"rounded",id:"snap-ext",title:"Reverse line and snap",onClick:function(e){e.preventDefault();var t=document.querySelector('input[name="radio"]:checked')?document.querySelector('input[name="radio"]:checked').value:null;t&&(u(t),g(function(e){var t=e.points.slice();return t.reverse(),{gid:1,points:t}}(a[t])))}},"Reverse snap"),i.a.createElement("button",{className:"rounded",id:"snap-ext",title:"Apply change",onClick:function(e){if(e.preventDefault(),p&&c){var t=Object(s.a)(a);t.splice(p,1,{gid:1,points:c}),l(t)}}},"Apply"))},ve=function(){var e={display:"flex",position:"relative",flexWrap:"nowrap",width:"100vw",height:window.innerHeight},t=JSON.parse(localStorage.getItem("sessionData")),a=function(){var e={points:r,lines:p,areas:h};localStorage.setItem("sessionData",JSON.stringify(e)),sessionStorage.setItem("showLanding",JSON.stringify(I))};Object(n.useEffect)((function(){window.addEventListener("beforeunload",a)}));var l=Object(n.useState)(t.points&&t.points.length?t.points:[{gid:1,coordinates:[77.516233,28.494164]}]),c=Object(o.a)(l,2),r=c[0],s=c[1],d=Object(n.useState)(t.lines?t.lines:[{gid:1,points:[{gid:1,coordinates:[77.536233,28.494164]},{gid:1,coordinates:[77.556233,28.494164]},{gid:1,coordinates:[77.546233,28.492164]}]}]),m=Object(o.a)(d,2),p=m[0],u=m[1],g=Object(n.useState)(t.areas?t.areas:[{gid:1,points:[{gid:1,coordinates:[77.531337,28.50721867]},{gid:1,coordinates:[77.53786711,28.5021375]},{gid:1,coordinates:[77.53892413,28.51272691]},{gid:1,coordinates:[77.53150213,28.51518115]}]}]),f=Object(o.a)(g,2),h=f[0],b=f[1],E=Object(n.useState)(!1),A=Object(o.a)(E,2),v=A[0],w=A[1],x=Object(n.useState)(window.innerWidth>1e3),y=Object(o.a)(x,2),k=y[0],O=y[1],j=!1!==JSON.parse(localStorage.getItem("showLanding"))&&(null===JSON.parse(sessionStorage.getItem("showLanding"))||!0===JSON.parse(sessionStorage.getItem("showLanding"))),S=Object(n.useState)(j),C=Object(o.a)(S,2),I=C[0],N=C[1],M=Object(n.useState)(!1),L=Object(o.a)(M,2),B=L[0],D=L[1],J=Object(n.useState)([]),F=Object(o.a)(J,2),G=F[0],T=F[1];return i.a.createElement("div",{className:"App",style:e},I?i.a.createElement(he,{showLanding:I,toggleShowLanding:N}):null,k?null:window.innerWidth>1e3?i.a.createElement("div",{id:"title"},i.a.createElement("div",null,i.a.createElement("h1",null,"descartes v1.3")),i.a.createElement("div",{style:{display:"flex",alignItems:"center",float:"right"}},i.a.createElement("button",{className:"collapse",title:k?"collapse":"expand",onClick:function(){O(!k)}},i.a.createElement("img",{src:_.a,alt:"Menu",width:"12px"})))):i.a.createElement("div",{style:{display:"flex",alignItems:"center",position:"absolute",left:"6px",top:"22.5px",zIndex:"3500"}},i.a.createElement("button",{className:"collapse",title:k?"collapse":"expand",onClick:function(){O(!k)}},i.a.createElement("img",{src:_.a,alt:"Menu",width:"12px"}))),i.a.createElement(H,{points:r,setPoints:s,lines:p,setLines:u,areas:h,setAreas:b,showSidebar:k,tempMarks:G,setTempMarks:T}),k?i.a.createElement(le,{points:r,setPoints:s,lines:p,setLines:u,areas:h,setAreas:b,showOutput:v,toggleShowOutput:w,showSidebar:k,toggleShowSidebar:O,showSnap:B,toggleShowSnap:D}):null,B?i.a.createElement(Ae,{lines:p,setLines:u,showSnap:B,toggleShowSnap:D,tempMarks:G,setTempMarks:T}):null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[57,1,2]]]);
//# sourceMappingURL=main.791fea6c.chunk.js.map